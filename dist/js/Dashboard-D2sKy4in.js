import{u as e,j as s}from"./index-CzB5W-an.js";import{l as t}from"./config-mNRQLehO.js";import{r as a}from"./react-vendor-CrIkLlfu.js";import{g as l}from"./users-DfdSvRQq.js";import{a as i}from"./associations-DqlviB6E.js";import{g as r}from"./rankings-Dd-U_8wo.js";import{a as n}from"./tasks-ClxJcryr.js";import{c as o}from"./index-CUJUhf6U.js";import"./XiuxianUserSelector-CJAMEv2m.js";import{X as c}from"./XiuxianStatCard-CGfcNyK2.js";import{X as d,a as m}from"./XiuxianPageTitle-BKkI_weX.js";import{I as x,X as p}from"./XiuxianTableContainer-uJuXTiFn.js";import{X as j}from"./XiuxianRefreshButton-mATMBPrJ.js";import{X as u}from"./XiuxianEmptyState-BL7z7grp.js";import{R as f}from"./TrophyOutlined-BY_gth0X.js";import{R as g}from"./UserOutlined-CMcGm8_5.js";import{R as h}from"./TeamOutlined-C8QF0c8j.js";import{R as b}from"./ClockCircleOutlined-D_87E8Ge.js";import{R as v,C as y}from"./row-DY_SyZbO.js";import{F as N}from"./Table-7BpXEJya.js";import{R as w}from"./CrownOutlined-BaBLuM41.js";import{R as k}from"./ExclamationCircleOutlined-BibgHPcT.js";import"./reactNode-BPtstK9W.js";import"./extendsObject-DHhHZwCU.js";import"./index-ap5nMSRc.js";import"./index-uuY-v4q6.js";var S={};Object.defineProperty(S,"__esModule",{value:!0});var O=S.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"};function C(){return C=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},C.apply(this,arguments)}const X=(e,s)=>a.createElement(x,C({},e,{ref:s,icon:O})),P=a.forwardRef(X);function T(){const{stats:x,loading:S,fetchStats:O}=(()=>{const{user:s}=e(),[t,o]=a.useState(!1),[c,d]=a.useState(null),m=async()=>{var e,t,a,c,m,x,p,j,u;if(s){o(!0);try{const s=localStorage.getItem("token");if(!s)return;const[o,f,g,h]=await Promise.all([l(s),i(s),r(s),n(s)]),b={users:{total:o.success&&(null==(e=o.data)?void 0:e.total)||0,active:o.success&&(null==(t=o.data)?void 0:t.total)||0,newToday:0},associations:{total:f.success&&(null==(a=f.data)?void 0:a.total)||0,totalMembers:f.success&&(null==(c=f.data)?void 0:c.totalMembers)||0,totalPower:f.success&&(null==(m=f.data)?void 0:m.totalPower)||0,totalLingshi:f.success&&(null==(x=f.data)?void 0:x.totalLingshi)||0},rankings:{lastUpdate:g.success&&(null==(p=g.data)?void 0:p.lastUpdate)||"",topAssociations:g.success&&(null==(j=g.data)?void 0:j.topAssociations)||[],topPlayers:g.success&&(null==(u=g.data)?void 0:u.topPlayers)||[]},system:{uptime:"7天 12小时 30分钟",lastBackup:(new Date).toISOString(),activeTasks:h.success?Object.keys(h.data||{}).length:0}};d(b)}catch(f){}finally{o(!1)}}};return a.useEffect(()=>{m()},[s]),{loading:t,stats:c,fetchStats:m}})(),C=[{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"排名"})}),key:"rank",width:60,render:(e,t,a)=>s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:o("text-sm font-bold",{"text-yellow-400":0===a,"text-slate-400":1===a,"text-orange-400":2===a}),children:a+1})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:s.jsx("span",{children:"玩家"})}),key:"name",render:(e,t)=>s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:s.jsx("div",{className:"font-medium text-sm text-white",children:t.name})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:s.jsx("span",{children:"ID"})}),key:"id",render:(e,t)=>s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:s.jsx("div",{className:"font-mono text-xs bg-slate-700/50 px-2 py-1 rounded text-slate-400",children:t.id})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:s.jsx("span",{children:"境界"})}),key:"level",render:(e,a)=>s.jsx("div",{className:"text-sm font-medium text-blue-400",children:t[a.level]})},{title:s.jsx("div",{className:"flex items-center gap-2 text-cyan-400 font-bold",children:s.jsx("span",{children:"战力"})}),key:"power",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-green-400",children:(t.power||0).toLocaleString()})}],X=[{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"排名"})}),key:"rank",width:60,render:(e,t,a)=>s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:o("text-sm font-bold",{"text-yellow-400":0===a,"text-slate-400":1===a,"text-orange-400":2===a}),children:a+1})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:s.jsx("span",{children:"宗门"})}),key:"name",render:(e,t)=>s.jsx("div",{className:"font-medium text-sm truncate max-w-24 sm:max-w-none text-white",children:t.name})},{title:s.jsx("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:s.jsx("span",{children:"成员数"})}),key:"members",render:(e,t)=>s.jsx("div",{className:"text-sm text-slate-400",children:t.members})},{title:s.jsx("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:s.jsx("span",{children:"总战力"})}),key:"power",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-green-400",children:(t.power||0).toLocaleString()})},{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"灵石池"})}),key:"lingshi",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-purple-400",children:(t.lingshi||0).toLocaleString()})}];return s.jsxs(d,{children:[s.jsx(m,{icon:s.jsx(f,{}),title:"数据看板",subtitle:"修仙界数据总览",actions:s.jsx(j,{loading:S,onClick:O})}),x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx(c,{title:"总玩家数",value:x.users.total,icon:s.jsx(g,{}),gradient:"blue",subtitle:`活跃: ${x.users.active} | 今日新增: ${x.users.newToday}`}),s.jsx(c,{title:"宗门总数",value:x.associations.total,icon:s.jsx(h,{}),gradient:"green",subtitle:`总成员: ${x.associations.totalMembers}`}),s.jsx(c,{title:"定时任务总数",value:x.system.activeTasks,icon:s.jsx(b,{}),gradient:"yellow",subtitle:`运行时间: ${x.system.uptime}`}),s.jsx(c,{title:"数据更新时间",value:new Date(x.rankings.lastUpdate).toLocaleString("zh-CN"),icon:s.jsx(P,{}),gradient:"purple",subtitle:`最后更新: ${new Date(x.rankings.lastUpdate).toLocaleString("zh-CN")}`})]}),s.jsx(p,{title:"排行榜数据",icon:s.jsx(f,{}),children:s.jsxs(v,{gutter:[16,16],children:[s.jsx(y,{xs:24,lg:12,children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-700/30 to-slate-800/30 backdrop-blur-xl border border-slate-600/50 rounded-xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(f,{className:"text-yellow-400"}),s.jsx("span",{className:"text-lg font-bold text-white",children:"玩家排行榜 TOP10"})]}),s.jsx(N,{columns:C,dataSource:x.rankings.topPlayers.slice(0,10),rowKey:"id",pagination:!1,size:"small",scroll:{x:300,y:300},rowClassName:()=>"bg-slate-700 hover:bg-slate-600",className:"xiuxian-table"})]})}),s.jsx(y,{xs:24,lg:12,children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-700/30 to-slate-800/30 backdrop-blur-xl border border-slate-600/50 rounded-xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(w,{className:"text-purple-400"}),s.jsx("span",{className:"text-lg font-bold text-white",children:"宗门排行榜 TOP10"})]}),s.jsx(N,{columns:X,dataSource:x.rankings.topAssociations.slice(0,10),rowKey:"name",pagination:!1,size:"small",scroll:{x:400,y:300},rowClassName:()=>"bg-slate-700 hover:bg-slate-600",className:"xiuxian-table"})]})})]})})]}),!x&&!S&&s.jsx(u,{icon:s.jsx(k,{className:"text-6xl text-slate-400"}),title:"暂无数据",description:"请点击刷新按钮获取最新数据"})]})}export{T as default};
