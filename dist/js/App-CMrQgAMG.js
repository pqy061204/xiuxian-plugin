import{a as e,j as t}from"./index-CzB5W-an.js";import{r as s,b as a}from"./react-vendor-CrIkLlfu.js";import{F as r}from"./index-DZ9d-DkS.js";import{s as n}from"./index-CmzwWeYC.js";import{c as l}from"./index-CUJUhf6U.js";import{C as o,u as i,I as c,S as d,B as m}from"./XiuxianUserSelector-CJAMEv2m.js";import{X as u}from"./XiuxianStatCard-CGfcNyK2.js";import{I as h,g as x,i as g,X as p}from"./XiuxianTableContainer-uJuXTiFn.js";import{R as f}from"./UserOutlined-CMcGm8_5.js";import{d as b}from"./dayjs.min-BQQTCDPZ.js";import{X as j}from"./XiuxianTableWithPagination-BnylOhBT.js";import{g as v,m as y,r as N,K as w,u as $,C as S,c as C,a as O}from"./reactNode-BPtstK9W.js";import{R as _}from"./CrownOutlined-BaBLuM41.js";import{T as k}from"./index-fIKVRXO6.js";import{S as z}from"./Table-7BpXEJya.js";import{R as I}from"./EyeOutlined-icIqLiwO.js";import{R as E,C as M}from"./row-DY_SyZbO.js";import{M as T}from"./index-DK44AtS5.js";import{C as R}from"./index-BIe-3wxh.js";import{X as B,a as H}from"./XiuxianPageTitle-BKkI_weX.js";import{X as P}from"./XiuxianRefreshButton-mATMBPrJ.js";import{R as D}from"./PlusOutlined-BMCLRGoq.js";import"./extendsObject-DHhHZwCU.js";import"./context-DTIjEczQ.js";import"./index-uuY-v4q6.js";import"./index-ap5nMSRc.js";import"./index-DujH-cyV.js";var L={};Object.defineProperty(L,"__esModule",{value:!0});var F=L.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},V.apply(this,arguments)}const W=(e,t)=>s.createElement(h,V({},e,{ref:t,icon:F})),X=s.forwardRef(W);var A={};Object.defineProperty(A,"__esModule",{value:!0});var G=A.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Y.apply(this,arguments)}const Z=(e,t)=>s.createElement(h,Y({},e,{ref:t,icon:G})),q=s.forwardRef(Z);var U={};Object.defineProperty(U,"__esModule",{value:!0});var K=U.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},J.apply(this,arguments)}const Q=(e,t)=>s.createElement(h,J({},e,{ref:t,icon:K})),ee=s.forwardRef(Q);var te={};Object.defineProperty(te,"__esModule",{value:!0});var se=te.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ae.apply(this,arguments)}const re=(e,t)=>s.createElement(h,ae({},e,{ref:t,icon:se})),ne=s.forwardRef(re);var le={};Object.defineProperty(le,"__esModule",{value:!0});var oe=le.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ie.apply(this,arguments)}const ce=(e,t)=>s.createElement(h,ie({},e,{ref:t,icon:oe})),de=s.forwardRef(ce),me=new w("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),ue=new w("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),he=new w("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),xe=new w("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),ge=new w("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),pe=new w("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),fe=e=>{const{fontHeight:t,lineWidth:s,marginXS:a,colorBorderBg:r}=e,n=t,l=s,o=e.colorTextLightSolid,i=e.colorError,c=e.colorErrorHover;return y(e,{badgeFontHeight:n,badgeShadowSize:l,badgeTextColor:o,badgeColor:i,badgeColorHover:c,badgeShadowColor:r,badgeProcessingDuration:"1.2s",badgeRibbonOffset:a,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},be=e=>{const{fontSize:t,lineHeight:s,fontSizeSM:a,lineWidth:r}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*s)-2*r,indicatorHeightSM:t,dotSize:a/2,textFontSize:a,textFontSizeSM:a,textFontWeight:"normal",statusSize:a/2}},je=v("Badge",e=>(e=>{const{componentCls:t,iconCls:s,antCls:a,badgeShadowSize:r,textFontSize:n,textFontSizeSM:l,statusSize:o,dotSize:i,textFontWeight:c,indicatorHeight:d,indicatorHeightSM:m,marginXS:u,calc:h}=e,g=`${a}-scroll-number`,p=x(e,(e,{darkColor:s})=>({[`&${t} ${t}-color-${e}`]:{background:s,[`&:not(${t}-count)`]:{color:s},"a:hover &":{background:s}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:d,height:d,color:e.badgeTextColor,fontWeight:c,fontSize:n,lineHeight:$(d),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:h(d).div(2).equal(),boxShadow:`0 0 0 ${$(r)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:m,height:m,fontSize:l,lineHeight:$(m),borderRadius:h(m).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${$(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:i,minWidth:i,height:i,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${$(r)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${g}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${s}-spin`]:{animationName:pe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:o,height:o,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:r,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:me,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:u,color:e.colorText,fontSize:e.fontSize}}}),p),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:ue,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:he,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:xe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:ge,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${g}-custom-component, ${t}-count`]:{transform:"none"},[`${g}-custom-component, ${g}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[g]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${g}-only`]:{position:"relative",display:"inline-block",height:d,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${g}-only-unit`]:{height:d,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${g}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${g}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}})(fe(e)),be),ve=v(["Badge","Ribbon"],e=>(e=>{const{antCls:t,badgeFontHeight:s,marginXS:a,badgeRibbonOffset:r,calc:n}=e,l=`${t}-ribbon`,o=`${t}-ribbon-wrapper`,i=x(e,(e,{darkColor:t})=>({[`&${l}-color-${e}`]:{background:t,color:t}}));return{[o]:{position:"relative"},[l]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"absolute",top:a,padding:`0 ${$(e.paddingXS)}`,color:e.colorPrimary,lineHeight:$(s),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${l}-text`]:{color:e.badgeTextColor},[`${l}-corner`]:{position:"absolute",top:"100%",width:r,height:r,color:"currentcolor",border:`${$(n(r).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),i),{[`&${l}-placement-end`]:{insetInlineEnd:n(r).mul(-1).equal(),borderEndEndRadius:0,[`${l}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${l}-placement-start`]:{insetInlineStart:n(r).mul(-1).equal(),borderEndStartRadius:0,[`${l}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}})(fe(e)),be),ye=e=>{const{prefixCls:t,value:a,current:r,offset:n=0}=e;let o;return n&&(o={position:"absolute",top:`${n}00%`,left:0}),s.createElement("span",{style:o,className:l(`${t}-only-unit`,{current:r})},a)};function Ne(e,t,s){let a=e,r=0;for(;(a+10)%10!==t;)a+=s,r+=s;return r}const we=e=>{const{prefixCls:t,count:a,value:r}=e,n=Number(r),l=Math.abs(a),[o,i]=s.useState(n),[c,d]=s.useState(l),m=()=>{i(n),d(l)};let u,h;if(s.useEffect(()=>{const e=setTimeout(m,1e3);return()=>clearTimeout(e)},[n]),o===n||Number.isNaN(n)||Number.isNaN(o))u=[s.createElement(ye,Object.assign({},e,{key:n,current:!0}))],h={transition:"none"};else{u=[];const t=n+10,a=[];for(let e=n;e<=t;e+=1)a.push(e);const r=c<l?1:-1,i=a.findIndex(e=>e%10===o);u=(r<0?a.slice(0,i+1):a.slice(i)).map((t,a)=>{const n=t%10;return s.createElement(ye,Object.assign({},e,{key:t,value:n,offset:r<0?a-i:a,current:a===i}))}),h={transform:`translateY(${-Ne(o,n,r)}00%)`}}return s.createElement("span",{className:`${t}-only`,style:h,onTransitionEnd:m},u)};const $e=s.forwardRef((e,t)=>{const{prefixCls:a,count:r,className:n,motionClassName:o,style:i,title:c,show:d,component:m="sup",children:u}=e,h=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s}(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:x}=s.useContext(S),g=x("scroll-number",a),p=Object.assign(Object.assign({},h),{"data-show":d,style:i,className:l(g,n,o),title:c});let f=r;if(r&&Number(r)%1==0){const e=String(r).split("");f=s.createElement("bdi",null,e.map((t,a)=>s.createElement(we,{prefixCls:g,count:Number(r),value:t,key:e.length-a})))}return(null==i?void 0:i.borderColor)&&(p.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),u?C(u,e=>({className:l(`${g}-custom-component`,null==e?void 0:e.className,o)})):s.createElement(m,Object.assign({},p,{ref:t}),f)});const Se=s.forwardRef((e,t)=>{var a,r,n,i,c;const{prefixCls:d,scrollNumberPrefixCls:m,children:u,status:h,text:x,color:p,count:f=null,overflowCount:b=99,dot:j=!1,size:v="default",title:y,offset:N,style:w,className:$,rootClassName:O,classNames:_,styles:k,showZero:z=!1}=e,I=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s}(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:E,direction:M,badge:T}=s.useContext(S),R=E("badge",d),[B,H,P]=je(R),D=f>b?`${b}+`:f,L="0"===D||0===D||"0"===x||0===x,F=null===f||L&&!z,V=(null!=h||null!=p)&&F,W=null!=h||!L,X=j&&!L,A=X?"":D,G=s.useMemo(()=>(!(null!=A&&""!==A||null!=x&&""!==x)||L&&!z)&&!X,[A,L,z,X,x]),Y=s.useRef(f);G||(Y.current=f);const Z=Y.current,q=s.useRef(A);G||(q.current=A);const U=q.current,K=s.useRef(X);G||(K.current=X);const J=s.useMemo(()=>{if(!N)return Object.assign(Object.assign({},null==T?void 0:T.style),w);const e={marginTop:N[1]};return"rtl"===M?e.left=parseInt(N[0],10):e.right=-parseInt(N[0],10),Object.assign(Object.assign(Object.assign({},e),null==T?void 0:T.style),w)},[M,N,w,null==T?void 0:T.style]),Q=null!=y?y:"string"==typeof Z||"number"==typeof Z?Z:void 0,ee=!G&&(0===x?z:!!x&&!0!==x),te=ee?s.createElement("span",{className:`${R}-status-text`},x):null,se=Z&&"object"==typeof Z?C(Z,e=>({style:Object.assign(Object.assign({},J),e.style)})):void 0,ae=g(p,!1),re=l(null==_?void 0:_.indicator,null===(a=null==T?void 0:T.classNames)||void 0===a?void 0:a.indicator,{[`${R}-status-dot`]:V,[`${R}-status-${h}`]:!!h,[`${R}-color-${p}`]:ae}),ne={};p&&!ae&&(ne.color=p,ne.background=p);const le=l(R,{[`${R}-status`]:V,[`${R}-not-a-wrapper`]:!u,[`${R}-rtl`]:"rtl"===M},$,O,null==T?void 0:T.className,null===(r=null==T?void 0:T.classNames)||void 0===r?void 0:r.root,null==_?void 0:_.root,H,P);if(!u&&V&&(x||W||!F)){const e=J.color;return B(s.createElement("span",Object.assign({},I,{className:le,style:Object.assign(Object.assign(Object.assign({},null==k?void 0:k.root),null===(n=null==T?void 0:T.styles)||void 0===n?void 0:n.root),J)}),s.createElement("span",{className:re,style:Object.assign(Object.assign(Object.assign({},null==k?void 0:k.indicator),null===(i=null==T?void 0:T.styles)||void 0===i?void 0:i.indicator),ne)}),ee&&s.createElement("span",{style:{color:e},className:`${R}-status-text`},x)))}return B(s.createElement("span",Object.assign({ref:t},I,{className:le,style:Object.assign(Object.assign({},null===(c=null==T?void 0:T.styles)||void 0===c?void 0:c.root),null==k?void 0:k.root)}),u,s.createElement(o,{visible:!G,motionName:`${R}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:e})=>{var t,a;const r=E("scroll-number",m),n=K.current,o=l(null==_?void 0:_.indicator,null===(t=null==T?void 0:T.classNames)||void 0===t?void 0:t.indicator,{[`${R}-dot`]:n,[`${R}-count`]:!n,[`${R}-count-sm`]:"small"===v,[`${R}-multiple-words`]:!n&&U&&U.toString().length>1,[`${R}-status-${h}`]:!!h,[`${R}-color-${p}`]:ae});let i=Object.assign(Object.assign(Object.assign({},null==k?void 0:k.indicator),null===(a=null==T?void 0:T.styles)||void 0===a?void 0:a.indicator),J);return p&&!ae&&(i=i||{},i.background=p),s.createElement($e,{prefixCls:r,show:!G,motionClassName:e,className:o,count:U,title:Q,style:i,key:"scrollNumber"},se)}),te))});Se.Ribbon=e=>{const{className:t,prefixCls:a,style:r,color:n,children:o,text:i,placement:c="end",rootClassName:d}=e,{getPrefixCls:m,direction:u}=s.useContext(S),h=m("ribbon",a),x=`${h}-wrapper`,[p,f,b]=ve(h,x),j=g(n,!1),v=l(h,`${h}-placement-${c}`,{[`${h}-rtl`]:"rtl"===u,[`${h}-color-${n}`]:j},t),y={},N={};return n&&!j&&(y.background=n,N.color=n),p(s.createElement("div",{className:l(x,d,f,b)},o,s.createElement("div",{className:l(v,f),style:Object.assign(Object.assign({},y),r)},s.createElement("span",{className:`${h}-text`},i),s.createElement("div",{className:`${h}-corner`,style:N}))))};const Ce=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{[`&${t}`]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},Oe=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:s,colorSplit:a,lineWidth:r,textPaddingInline:n,orientationMargin:l,verticalMarginInline:o}=e;return{[t]:Object.assign(Object.assign({},N(e)),{borderBlockStart:`${$(r)} solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${$(r)} solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${$(e.marginLG)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${$(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${$(r)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${l} * 100%)`},"&::after":{width:`calc(100% - ${l} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${l} * 100%)`},"&::after":{width:`calc(${l} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:n},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${$(r)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:`${$(r)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:s}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:s}}})}},_e=v("Divider",e=>{const t=y(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[Oe(t),Ce(t)]},e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}});const ke={small:"sm",middle:"md"},ze=e=>{const{getPrefixCls:t,direction:a,className:r,style:n}=O("divider"),{prefixCls:o,type:c="horizontal",orientation:d="center",orientationMargin:m,className:u,rootClassName:h,children:x,dashed:g,variant:p="solid",plain:f,style:b,size:j}=e,v=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),y=t("divider",o),[N,w,$]=_e(y),S=i(j),C=ke[S],_=!!x,k=s.useMemo(()=>"left"===d?"rtl"===a?"end":"start":"right"===d?"rtl"===a?"start":"end":d,[a,d]),z="start"===k&&null!=m,I="end"===k&&null!=m,E=l(y,r,w,$,`${y}-${c}`,{[`${y}-with-text`]:_,[`${y}-with-text-${k}`]:_,[`${y}-dashed`]:!!g,[`${y}-${p}`]:"solid"!==p,[`${y}-plain`]:!!f,[`${y}-rtl`]:"rtl"===a,[`${y}-no-default-orientation-margin-start`]:z,[`${y}-no-default-orientation-margin-end`]:I,[`${y}-${C}`]:!!C},u,h),M=s.useMemo(()=>"number"==typeof m?m:/^\d+$/.test(m)?Number(m):m,[m]),T={marginInlineStart:z?M:void 0,marginInlineEnd:I?M:void 0};return N(s.createElement("div",Object.assign({className:E,style:Object.assign(Object.assign({},n),b)},v,{role:"separator"}),x&&"vertical"!==c&&s.createElement("span",{className:`${y}-inner-text`,style:T},x)))},Ie=()=>{const[t,s]=a.useState(!1),[l,o]=a.useState([]),[i,c]=a.useState([]),[d,m]=a.useState(null),[u,h]=a.useState(null),[x,g]=a.useState("users"),[p,f]=a.useState(!1),[b,j]=a.useState(null),[v]=r.useForm(),y=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/config",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取配置信息失败"}}catch(t){return{success:!1,message:"获取配置信息失败"}}})();t.success&&t.data?h(t.data):n.error(t.message||"获取配置信息失败")},N=async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/users",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取用户数据失败"}}catch(t){return{success:!1,message:"获取用户数据失败"}}})();t.success&&t.data?o(t.data):n.error(t.message||"获取用户数据失败")}catch(t){n.error("获取用户数据失败")}s(!1)},w=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/stats",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取统计数据失败"}}catch(t){return{success:!1,message:"获取统计数据失败"}}})();t.success&&t.data?m(t.data):n.error(t.message||"获取统计数据失败")};return a.useEffect(()=>{(async()=>{try{await Promise.all([y(),N(),w()])}catch(e){}})()},[]),{loading:t,users:l,records:i,stats:d,config:u,selectedTab:x,rechargeModalVisible:p,selectedUser:b,rechargeForm:v,setSelectedTab:g,setRechargeModalVisible:f,setSelectedUser:j,fetchUsers:N,fetchRecords:async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/records",method:"GET"});return 200===t.code?{success:!0,data:t.data.records}:{success:!1,message:t.message||"获取充值记录失败"}}catch(t){return{success:!1,message:"获取充值记录失败"}}})();t.success&&t.data?c(t.data):n.error(t.message||"获取充值记录失败")}catch(t){n.error("获取充值记录失败")}s(!1)},fetchStats:w,fetchConfig:y,handleRechargeOk:async t=>{try{const s=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:t});return 201===s.code?{success:!0,data:s.data}:{success:!1,message:s.message||"创建充值记录失败"}}catch(s){return{success:!1,message:"创建充值记录失败"}}})({action:t.type,userId:t.userId,tier:t.tier,paymentMethod:"admin",remark:t.remark});if(s.success&&s.data){const t=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:{action:"complete-payment",...t}});return 200===s.code?{success:!0}:{success:!1,message:s.message||"支付完成失败"}}catch(s){return{success:!1,message:"支付完成失败"}}})({recordId:s.data.id,transactionId:"ADMIN_"+Date.now(),paymentMethod:"admin"});t.success?(n.success("充值成功"),f(!1),j(null),v.resetFields(),N(),w()):n.error(t.message||"支付完成失败")}else n.error(s.message||"创建充值记录失败")}catch(s){n.error("充值操作失败，请重试")}}}},Ee=({value:e,onChange:s,options:a,className:r="",size:n="default",variant:l="button"})=>{const o={small:"px-3 py-1.5 text-sm",default:"px-4 py-2 text-base",large:"px-6 py-3 text-lg"},i=e=>{var t;s&&!(null==(t=a.find(t=>t.value===e))?void 0:t.disabled)&&s(e)};return"button"===l?t.jsx("div",{className:`flex gap-2 ${r}`,children:a.map(s=>{const a=e===s.value,r=s.disabled;return t.jsx("button",{type:"button",disabled:r,onClick:()=>i(s.value),className:`\n                ${o[n]}\n                rounded-lg font-medium transition-all duration-200\n                ${a?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":r?"bg-slate-800/30 text-slate-500 border border-slate-700 cursor-not-allowed":"bg-slate-700/50 text-slate-300 border border-slate-600 hover:bg-slate-600/50 hover:text-white hover:border-slate-500"}\n                focus:outline-none focus:ring-2 focus:ring-purple-500/50\n              `,children:s.label},s.value)})}):t.jsx("div",{className:`space-y-2 ${r}`,children:a.map(s=>{const a=e===s.value,r=s.disabled;return t.jsxs("label",{className:`\n              flex items-center gap-3 cursor-pointer transition-all duration-200\n              ${r?"cursor-not-allowed opacity-50":"hover:text-white"}\n            `,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",value:s.value,checked:a,disabled:r,onChange:()=>i(s.value),className:"sr-only"}),t.jsx("div",{className:`\n                  w-4 h-4 border-2 rounded-full flex items-center justify-center\n                  transition-all duration-200\n                  ${a?"border-purple-500 bg-purple-500":r?"border-slate-600 bg-slate-800":"border-slate-500 bg-slate-700 hover:border-slate-400"}\n                `,children:a&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsx("span",{className:"text-sm "+(a?"text-white":"text-slate-300"),children:s.label})]},s.value)})})};function Me({stats:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[t.jsx(u,{title:"总充值金额",value:`¥${e.total_amount.toLocaleString()}`,icon:t.jsx(X,{}),gradient:"green"}),t.jsx(u,{title:"总充值次数",value:e.total_count.toLocaleString(),icon:t.jsx(X,{}),gradient:"blue"}),t.jsx(u,{title:"首充用户数",value:e.first_recharge_users.toLocaleString(),icon:t.jsx(X,{}),gradient:"purple"}),t.jsx(u,{title:"今日充值",value:`¥${e.today_amount.toLocaleString()}`,icon:t.jsx(X,{}),gradient:"orange"})]})}function Te({selectedTab:e,onTabChange:s,onRecordsTabClick:a}){const r=[{name:"users",icon:t.jsx(f,{}),content:null},{name:"records",icon:t.jsx(de,{}),content:null},{name:"stats",icon:t.jsx(X,{}),content:null}];return t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex gap-4",children:r.map(r=>t.jsxs("button",{className:"px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 "+(e===r.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 border border-slate-600"),onClick:()=>{var e;"records"===(e=r.name)?a():s(e)},children:[r.icon,"users"===r.name&&"用户货币","records"===r.name&&"充值记录","stats"===r.name&&"统计分析"]},r.name))})})}function Re({users:e,loading:s,onRefresh:r,onStatsRefresh:n}){const[l,o]=a.useState(""),i=[{title:"用户ID",dataIndex:"id",key:"id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"金币余额",dataIndex:"currency",key:"currency",width:120,render:e=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ee,{className:"text-yellow-400"}),t.jsx("span",{className:"font-bold text-yellow-400",children:e.toLocaleString()})]})},{title:"月卡状态",key:"monthCards",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(q,{className:"text-blue-400"}),t.jsx("span",{className:"text-sm",children:"小月卡:"}),t.jsx(Se,{count:b(s.small_month_card_expire_time).diff(b(),"day")+1,showZero:!0,color:s.small_month_card_expire_time>Date.now()?"blue":"default"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"text-purple-400"}),t.jsx("span",{className:"text-sm",children:"大月卡:"}),t.jsx(Se,{count:b(s.big_month_card_expire_time).diff(b(),"day")+1,showZero:!0,color:s.big_month_card_expire_time>Date.now()?"purple":"default"})]})]})},{title:"充值信息",key:"rechargeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"总充值:"}),t.jsxs("span",{className:"text-green-400 font-bold ml-1",children:["¥",s.total_recharge_amount]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"充值次数:"}),t.jsx("span",{className:"text-blue-400 font-bold ml-1",children:s.total_recharge_count})]}),s.is_first_recharge&&t.jsx(k,{color:"gold",icon:t.jsx(ne,{}),children:"首充用户"})]})},{title:"时间信息",key:"timeInfo",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"最后充值:"}),t.jsx("div",{className:"text-slate-300",children:s.last_recharge_time?b(s.last_recharge_time).format("YYYY-MM-DD HH:mm"):"无"})]}),s.first_recharge_time&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"首充时间:"}),t.jsx("div",{className:"text-slate-300",children:b(s.first_recharge_time).format("YYYY-MM-DD HH:mm")})]})]})}],d=e.filter(e=>e.id.toLowerCase().includes(l.toLowerCase()));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(c.Search,{placeholder:"输入关键词搜索...",value:l,onChange:e=>o(e.target.value),onSearch:()=>{},size:"large",onKeyPress:e=>"Enter"===e.key&&o(e.target.value),className:"w-full xiuxian-input"})}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",d.length," 个用户"]})]}),t.jsx(j,{columns:i,dataSource:d,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:d.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}const{Option:Be}=d;function He({records:e,loading:s,config:r}){const[n,l]=a.useState(""),[o,i]=a.useState(""),[u,h]=a.useState(""),x=[{title:"记录ID",dataIndex:"id",key:"id",width:100,render:e=>t.jsx("div",{className:"font-mono text-xs bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"用户ID",dataIndex:"user_id",key:"user_id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"充值类型",dataIndex:"type",key:"type",width:120,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(k,{color:Pe(e),children:De(e)}),s.tier&&t.jsx("div",{className:"text-xs text-slate-400",children:s.tier})]})},{title:"充值金额",dataIndex:"tier",key:"amount",width:120,render:(e,s)=>{const a=(e=>{var t,s,a,n,l;if(!r)return 0;if(e===(null==(s=null==(t=r.monthCardConfig)?void 0:t.SMALL)?void 0:s.name))return r.monthCardConfig.SMALL.price;if(e===(null==(n=null==(a=r.monthCardConfig)?void 0:a.BIG)?void 0:n.name))return r.monthCardConfig.BIG.price;const o=null==(l=r.rechargeTiers)?void 0:l.find(t=>t.name===e);return(null==o?void 0:o.amount)||0})(e);return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"font-bold text-green-400",children:["¥",a]}),s.currency_gained>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["获得金币: ",s.currency_gained.toLocaleString()]}),s.month_card_days>0&&t.jsxs("div",{className:"text-xs text-blue-400",children:["月卡天数: ",s.month_card_days,"天"]})]})}},{title:"支付状态",dataIndex:"payment_status",key:"payment_status",width:100,render:e=>t.jsx(k,{color:Le(e),children:Fe(e)})},{title:"支付信息",key:"paymentInfo",width:150,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"方式:"}),t.jsx("span",{className:"text-slate-300 ml-1",children:s.payment_method})]}),s.transaction_id&&t.jsxs("div",{className:"font-mono text-slate-400",children:[s.transaction_id.slice(0,8),"..."]})]})},{title:"时间信息",key:"timeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"创建:"}),t.jsx("div",{className:"text-slate-300",children:b(s.created_at).format("MM-DD HH:mm")})]}),s.paid_at&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"支付:"}),t.jsx("div",{className:"text-slate-300",children:b(s.paid_at).format("MM-DD HH:mm")})]})]})},{title:"特殊标记",key:"special",width:100,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[s.is_first_recharge&&t.jsx(k,{color:"gold",icon:t.jsx(ne,{}),children:"首充"}),s.first_recharge_bonus>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["奖励: +",s.first_recharge_bonus]})]})},{title:"操作",key:"actions",width:100,render:(e,s)=>t.jsx(z,{children:t.jsx(m,{size:"small",icon:t.jsx(I,{}),onClick:()=>{},children:"详情"})})}],g=e.filter(e=>{const t=e.user_id.toLowerCase().includes(n.toLowerCase())||e.id.toLowerCase().includes(n.toLowerCase()),s=!o||e.payment_status===o,a=!u||e.type===u;return t&&s&&a});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(c.Search,{placeholder:"搜索用户ID或记录ID",className:"w-full xiuxian-input",value:n,onChange:e=>l(e.target.value),onSearch:()=>{},onKeyPress:e=>"Enter"===e.key&&l(e.target.value)})}),t.jsxs(d,{placeholder:"支付状态",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:i,children:[t.jsx(Be,{value:"pending",children:"待支付"}),t.jsx(Be,{value:"success",children:"支付成功"}),t.jsx(Be,{value:"failed",children:"支付失败"}),t.jsx(Be,{value:"refunded",children:"已退款"})]}),t.jsxs(d,{placeholder:"充值类型",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:h,children:[t.jsx(Be,{value:"currency",children:"金币充值"}),t.jsx(Be,{value:"small_month_card",children:"小月卡"}),t.jsx(Be,{value:"big_month_card",children:"大月卡"}),t.jsx(Be,{value:"combo",children:"组合充值"})]}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",g.length," 条记录"]})]}),t.jsx(j,{columns:x,dataSource:g,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:g.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}function Pe(e){switch(e){case"currency":return"green";case"small_month_card":return"blue";case"big_month_card":return"purple";case"combo":return"orange";default:return"default"}}function De(e){switch(e){case"currency":return"金币充值";case"small_month_card":return"小月卡";case"big_month_card":return"大月卡";case"combo":return"组合充值";default:return e}}function Le(e){switch(e){case"pending":return"orange";case"success":return"green";case"failed":return"red";case"refunded":return"gray";default:return"default"}}function Fe(e){switch(e){case"pending":return"待支付";case"success":return"支付成功";case"failed":return"支付失败";case"refunded":return"已退款";default:return e}}function Ve({stats:e}){return e?t.jsxs("div",{className:"space-y-6",children:[t.jsxs(E,{gutter:16,children:[t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ee,{className:"text-green-400"}),"充值金额统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值金额"}),t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["¥",e.total_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-blue-400",children:["¥",e.month_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值金额"}),t.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["¥",e.today_amount.toLocaleString()]})]})]})]})}),t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(X,{className:"text-blue-400"}),"充值次数统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值次数"}),t.jsx("span",{className:"text-2xl font-bold text-blue-400",children:e.total_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值次数"}),t.jsx("span",{className:"text-xl font-bold text-purple-400",children:e.month_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值次数"}),t.jsx("span",{className:"text-lg font-bold text-cyan-400",children:e.today_count.toLocaleString()})]})]})]})})]}),t.jsxs(E,{gutter:16,children:[t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(f,{className:"text-yellow-400"}),"用户统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"首充用户数"}),t.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:e.first_recharge_users.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"平均充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-green-400",children:["¥",e.total_count>0?(e.total_amount/e.total_count).toFixed(2):"0.00"]})]})]})]})}),t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(de,{className:"text-purple-400"}),"系统信息"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"最后更新"}),t.jsx("span",{className:"text-sm text-slate-300",children:b(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})]})})]})})]})]}):t.jsx("div",{children:"暂无数据"})}const{Option:We}=d;function Xe({visible:e,user:a,onCancel:n,onOk:l,form:o,config:i,users:m=[]}){var u;const[h,x]=s.useState("currency"),[g,p]=s.useState(""),[f,j]=s.useState(""),[v,y]=s.useState(null),[N,w]=s.useState(null),[$,S]=s.useState("select");s.useEffect(()=>{e&&(o.resetFields(),x("currency"),p((null==a?void 0:a.id)||""),w(a),j(""),y(null),S("select"))},[e,o,a]),s.useEffect(()=>{if(f&&(null==i?void 0:i.rechargeTiers)){const e=i.rechargeTiers.find(e=>e.name===f);e&&y(e)}else f&&(null==i?void 0:i.monthCardConfig)&&(f===i.monthCardConfig.SMALL.name?y(i.monthCardConfig.SMALL):f===i.monthCardConfig.BIG.name&&y(i.monthCardConfig.BIG))},[f,i]);const C=e=>{p(e);const t=m.find(t=>t.id===e);w(t||null),o.setFieldsValue({userId:e})},O=e=>{const t=e.target.value;p(t),w(null),o.setFieldsValue({userId:t})},z=()=>t.jsx(r.Item,{name:"userId",label:t.jsx("span",{className:"text-slate-300",children:"用户ID"}),rules:[{required:!0,message:"请输入或选择用户ID"}],children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Ee,{value:$,onChange:e=>(S(e),p(""),w(null),void o.setFieldsValue({userId:void 0})),options:[{value:"select",label:"从列表选择"},{value:"manual",label:"手动输入"}],variant:"button",size:"small",className:"mb-3"}),"select"===$?t.jsx(d,{showSearch:!0,placeholder:"搜索并选择用户",value:g,onChange:C,filterOption:(e,t)=>{const s=null==t?void 0:t.children;return"string"==typeof s&&s.toLowerCase().includes(e.toLowerCase())},className:"xiuxian-select",dropdownRender:e=>t.jsxs("div",{children:[e,t.jsx(ze,{style:{margin:"8px 0"}}),t.jsxs("div",{className:"px-3 py-2 text-xs text-slate-400",children:["共 ",m.length," 个用户"]})]}),children:m.map(e=>t.jsx(We,{value:e.id,children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono text-sm",children:e.id}),e.is_first_recharge&&t.jsxs(k,{color:"gold",children:[t.jsx(_,{})," 首充"]})]}),t.jsxs("div",{className:"text-xs text-slate-400",children:["¥",e.currency," | ",e.total_recharge_count,"次"]})]})},e.id))}):t.jsx(c,{placeholder:"请输入用户ID",value:g,onChange:O,className:"xiuxian-input"})]})});return t.jsx(T,{title:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ee,{className:"text-purple-400"}),t.jsx("span",{className:"text-white",children:"用户充值"})]}),open:e,onCancel:n,onOk:()=>o.submit(),width:700,className:"xiuxian-modal",children:t.jsxs(r,{form:o,layout:"vertical",onFinish:l,children:[t.jsx(z,{}),N&&t.jsx(R,{className:"mb-4 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-blue-500/20",size:"small",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["用户ID: ",t.jsx("span",{className:"text-white font-mono",children:N.id})]}),t.jsxs("div",{children:["金币余额: ",t.jsx("span",{className:"text-yellow-400",children:N.currency.toLocaleString()})]}),t.jsxs("div",{children:["总充值: ",t.jsxs("span",{className:"text-green-400",children:["¥",N.total_recharge_amount]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["充值次数: ",t.jsx("span",{className:"text-blue-400",children:N.total_recharge_count})]}),t.jsxs("div",{children:["小月卡: ",t.jsxs("span",{className:"text-blue-400",children:[b(N.small_month_card_expire_time).diff(b(),"day")+1,"天"]})]}),t.jsxs("div",{children:["大月卡: ",t.jsxs("span",{className:"text-purple-400",children:[b(N.big_month_card_expire_time).diff(b(),"day")+1,"天"]})]})]})]})}),t.jsx(r.Item,{name:"type",label:t.jsx("span",{className:"text-slate-300",children:"充值类型"}),rules:[{required:!0,message:"请选择充值类型"}],children:t.jsxs(d,{onChange:e=>{x(e),j(""),y(null),o.setFieldsValue({tier:void 0})},className:"xiuxian-select",children:[t.jsx(We,{value:"recharge-currency",children:"金币充值"}),t.jsx(We,{value:"recharge-small-month-card",children:"小月卡"}),t.jsx(We,{value:"recharge-big-month-card",children:"大月卡"})]})}),"recharge-currency"===h&&t.jsx(r.Item,{name:"tier",label:t.jsx("span",{className:"text-slate-300",children:"充值档位"}),rules:[{required:!0,message:"请选择充值档位"}],children:t.jsx(d,{onChange:e=>{j(e),o.setFieldsValue({tier:e})},className:"xiuxian-select",placeholder:"请选择充值档位",children:null==(u=null==i?void 0:i.rechargeTiers)?void 0:u.map(e=>t.jsxs(We,{value:e.name,children:[e.name," (¥",e.amount,")"]},e.key))})}),v&&t.jsx(R,{className:"mb-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",size:"small",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"text-white font-semibold mb-2",children:v.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["价格: ",t.jsxs("span",{className:"text-yellow-400",children:["¥",v.amount||v.price]})]}),v.currencyGained&&t.jsxs("div",{children:["获得金币: ",t.jsx("span",{className:"text-green-400",children:v.currencyGained})]}),v.days&&t.jsxs("div",{children:["月卡天数: ",t.jsxs("span",{className:"text-blue-400",children:[v.days,"天"]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[v.firstRechargeBonus&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ne,{className:"text-pink-400"}),"首充奖励: ",t.jsxs("span",{className:"text-pink-400",children:[v.firstRechargeBonus,"金币"]})]}),(null==N?void 0:N.is_first_recharge)&&t.jsxs(k,{color:"gold",className:"mt-1",children:[t.jsx(_,{})," 首充用户"]})]})]})]})}),t.jsx(r.Item,{name:"remark",label:t.jsx("span",{className:"text-slate-300",children:"备注"}),children:t.jsx(c.TextArea,{rows:3,placeholder:"可选备注信息",className:"xiuxian-input"})})]})})}function Ae(){const{loading:e,users:a,records:r,stats:n,config:l,selectedTab:o,rechargeModalVisible:i,selectedUser:c,rechargeForm:d,setSelectedTab:m,setRechargeModalVisible:u,setSelectedUser:h,fetchUsers:x,fetchRecords:g,fetchStats:f,fetchConfig:b,handleRechargeOk:j}=Ie();s.useEffect(()=>{x(),f()},[]);return t.jsxs(B,{children:[t.jsx(H,{icon:t.jsx(ee,{}),title:"货币管理系统",subtitle:"管理用户金币、月卡和充值记录",actions:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"px-2 py-1 rounded-md bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",onClick:()=>{h(null),u(!0)},children:[t.jsx(D,{}),"充值"]}),t.jsx(P,{loading:e,onClick:()=>{x(),g(),f(),b()}})]})}),n&&t.jsx(Me,{stats:n}),t.jsx(Te,{selectedTab:o,onTabChange:m,onRecordsTabClick:()=>{m("records"),g()}}),t.jsxs(p,{title:("users"===o?"用户货币管理":"records"===o&&"充值记录管理")||"stats"===o&&"统计分析"||"货币管理",icon:t.jsx(ee,{}),children:["users"===o&&t.jsx(Re,{users:a,loading:e,onRefresh:x,onStatsRefresh:f}),"records"===o&&t.jsx(He,{records:r,loading:e,config:l}),"stats"===o&&t.jsx(Ve,{stats:n})]}),t.jsx(Xe,{visible:i,user:c,config:l,users:a,onCancel:()=>{u(!1),h(null),d.resetFields()},onOk:j,form:d})]})}export{Ae as default};
