import{r as e}from"./react-vendor-DC8kK7ng.js";import{c as t}from"./index-DXDPliM2.js";import{u as r,m as o,k as n,t as s}from"./XiuxianUserSelector-DG9qzst9.js";import{g as i,m as a,r as l,u as c,j as p,C as u,c as g}from"./reactNode-pxslT-9z.js";import{u as d,r as m}from"./XiuxianTableContainer-BrJeXT0C.js";import{P as f}from"./index-B7RDvfSF.js";const v=e.createContext({}),S=e=>{const{antCls:t,componentCls:r,iconCls:o,avatarBg:n,avatarColor:s,containerSize:i,containerSizeLG:a,containerSizeSM:p,textFontSize:u,textFontSizeLG:g,textFontSizeSM:d,iconFontSize:m,iconFontSizeLG:f,iconFontSizeSM:v,borderRadius:S,borderRadiusLG:b,borderRadiusSM:h,lineWidth:y,lineType:x}=e,z=(e,t,n,s)=>({width:e,height:e,borderRadius:"50%",fontSize:t,[`&${r}-square`]:{borderRadius:s},[`&${r}-icon`]:{fontSize:n,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},l(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:s,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:n,border:`${c(y)} ${x} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),z(i,u,m,S)),{"&-lg":Object.assign({},z(a,g,f,b)),"&-sm":Object.assign({},z(p,d,v,h)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},b=e=>{const{componentCls:t,groupBorderColor:r,groupOverlapping:o,groupSpace:n}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:n}}}},h=i("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:r}=e,o=a(e,{avatarBg:r,avatarColor:t});return[S(o),b(o)]},e=>{const{controlHeight:t,controlHeightLG:r,controlHeightSM:o,fontSize:n,fontSizeLG:s,fontSizeXL:i,fontSizeHeading3:a,marginXS:l,marginXXS:c,colorBorderBg:p}=e;return{containerSize:t,containerSizeLG:r,containerSizeSM:o,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((s+i)/2),iconFontSizeLG:a,iconFontSizeSM:n,groupSpace:c,groupOverlapping:-l,groupBorderColor:p}});const y=e.forwardRef((s,i)=>{const{prefixCls:a,shape:l,size:c,src:g,srcSet:f,icon:S,className:b,rootClassName:y,style:x,alt:z,draggable:j,children:O,crossOrigin:C,gap:$=4,onError:E}=s,N=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(s,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[F,k]=e.useState(1),[w,L]=e.useState(!1),[M,P]=e.useState(!0),G=e.useRef(null),R=e.useRef(null),T=p(i,G),{getPrefixCls:B,avatar:X}=e.useContext(u),H=e.useContext(v),A=()=>{if(!R.current||!G.current)return;const e=R.current.offsetWidth,t=G.current.offsetWidth;0!==e&&0!==t&&2*$<t&&k(t-2*$<e?(t-2*$)/e:1)};e.useEffect(()=>{L(!0)},[]),e.useEffect(()=>{P(!0),k(1)},[g]),e.useEffect(A,[$]);const I=()=>{!1!==(null==E?void 0:E())&&P(!1)},W=r(e=>{var t,r;return null!==(r=null!==(t=null!=c?c:null==H?void 0:H.size)&&void 0!==t?t:e)&&void 0!==r?r:"default"}),q=Object.keys("object"==typeof W&&W||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),Q=d(q),U=e.useMemo(()=>{if("object"!=typeof W)return{};const e=m.find(e=>Q[e]),t=W[e];return t?{width:t,height:t,fontSize:t&&(S||O)?t/2:18}:{}},[Q,W]),V=B("avatar",a),D=o(V),[J,K,Y]=h(V,D),Z=t({[`${V}-lg`]:"large"===W,[`${V}-sm`]:"small"===W}),_=e.isValidElement(g),ee=l||(null==H?void 0:H.shape)||"circle",te=t(V,Z,null==X?void 0:X.className,`${V}-${ee}`,{[`${V}-image`]:_||g&&M,[`${V}-icon`]:!!S},Y,D,b,y,K),re="number"==typeof W?{width:W,height:W,fontSize:S?W/2:18}:{};let oe;if("string"==typeof g&&M)oe=e.createElement("img",{src:g,draggable:j,srcSet:f,onError:I,alt:z,crossOrigin:C});else if(_)oe=g;else if(S)oe=S;else if(w||1!==F){const t=`scale(${F})`,r={msTransform:t,WebkitTransform:t,transform:t};oe=e.createElement(n,{onResize:A},e.createElement("span",{className:`${V}-string`,ref:R,style:Object.assign({},r)},O))}else oe=e.createElement("span",{className:`${V}-string`,style:{opacity:0},ref:R},O);return J(e.createElement("span",Object.assign({},N,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),U),null==X?void 0:X.style),x),className:te,ref:T}),oe))}),x=t=>{const{size:r,shape:o}=e.useContext(v),n=e.useMemo(()=>({size:t.size||r,shape:t.shape||o}),[t.size,t.shape,r,o]);return e.createElement(v.Provider,{value:n},t.children)},z=y;z.Group=r=>{var n,i,a,l;const{getPrefixCls:c,direction:p}=e.useContext(u),{prefixCls:d,className:m,rootClassName:v,style:S,maxCount:b,maxStyle:z,size:j,shape:O,maxPopoverPlacement:C,maxPopoverTrigger:$,children:E,max:N}=r,F=c("avatar",d),k=`${F}-group`,w=o(F),[L,M,P]=h(F,w),G=t(k,{[`${k}-rtl`]:"rtl"===p},P,w,m,v,M),R=s(E).map((e,t)=>g(e,{key:`avatar-key-${t}`})),T=(null==N?void 0:N.count)||b,B=R.length;if(T&&T<B){const r=R.slice(0,T),o=R.slice(T,B),s=(null==N?void 0:N.style)||z,c=(null===(n=null==N?void 0:N.popover)||void 0===n?void 0:n.trigger)||$||"hover",p=(null===(i=null==N?void 0:N.popover)||void 0===i?void 0:i.placement)||C||"top",u=Object.assign(Object.assign({content:o},null==N?void 0:N.popover),{classNames:{root:t(`${k}-popover`,null===(l=null===(a=null==N?void 0:N.popover)||void 0===a?void 0:a.classNames)||void 0===l?void 0:l.root)},placement:p,trigger:c});return r.push(e.createElement(f,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},u),e.createElement(y,{style:s},"+"+(B-T)))),L(e.createElement(x,{shape:O,size:j},e.createElement("div",{className:G,style:S},r)))}return L(e.createElement(x,{shape:O,size:j},e.createElement("div",{className:G,style:S},R)))};export{z as A};
