import{j as e,u as s}from"./index-CZe7n4Lj.js";import{c as t}from"./index-DXDPliM2.js";import{I as l,S as a,B as r}from"./XiuxianUserSelector-DG9qzst9.js";import{X as i}from"./XiuxianInfoCard-BD1Y4AW9.js";import{r as n}from"./react-vendor-DC8kK7ng.js";import{M as o}from"./index-DIi_BEjK.js";import{T as c}from"./index-BfhbG92g.js";import{R as d}from"./CloseOutlined-fb8qZBOa.js";import{l as x,p as h}from"./config-mNRQLehO.js";import{F as m}from"./index-Dz9nlkEI.js";import{T as g}from"./index-Dj1WZ8aH.js";import{R as u,C as p}from"./row-B6aAx17Z.js";import{R as b}from"./UserOutlined-83N7OiF5.js";import{T as j,R as f}from"./index-BJN5UFSC.js";import{I as v,X as w,T as N}from"./XiuxianTableContainer-BrJeXT0C.js";import{R as y}from"./CrownOutlined-C5T6qUCq.js";import{R as S}from"./SaveOutlined-CfhB-06k.js";import{g as L,a as I,u as k}from"./users-DBnvfyLz.js";import{s as O}from"./index-B2pL6Oo6.js";import{X as $}from"./XiuxianStatCard-DpY0hqOF.js";import{X as C,a as z}from"./XiuxianPageTitle-p-rFU0Cf.js";import{X as U}from"./XiuxianSearchBar-DuH0DftO.js";import{X as D}from"./XiuxianRefreshButton-Ssc2YR6P.js";import{A as B}from"./index-DAbVPbk1.js";import{X as T}from"./XiuxianTableWithPagination-iDbrxln5.js";import{R}from"./TrophyOutlined-B1mm8bUB.js";import{R as V}from"./FireOutlined-Bu5oHh8J.js";import{R as X}from"./StarOutlined-Cl-Yo3yF.js";import{R as E}from"./EyeOutlined-BpDRA3ZQ.js";import"./reactNode-pxslT-9z.js";import"./context-DvSbzuJ7.js";import"./extendsObject-7EMpNKCT.js";import"./index-CUUyKPWT.js";import"./Table-CmQFIGqV.js";import"./index-BbllsrZX.js";import"./PlusOutlined-ByZyTB3m.js";import"./SearchOutlined-CzglLOeT.js";import"./index-B7RDvfSF.js";var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M342 472h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H382.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8zm91.2-196h159.5l20.7 128h-201l20.8-128zm2.5 282.7c-.6-3.9-4-6.7-7.9-6.7H166.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248zM196.5 748l20.7-128h159.5l20.7 128H196.5zm709.4 58.7l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H596.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.3-.7 7.3-4.8 6.6-9.2zM626.5 748l20.7-128h159.5l20.7 128H626.5z"}}]},name:"gold",theme:"outlined"};function P(){return P=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},P.apply(this,arguments)}const M=(e,s)=>n.createElement(v,P({},e,{ref:s,icon:F})),H=n.forwardRef(M);var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},_.apply(this,arguments)}const G=(e,s)=>n.createElement(v,_({},e,{ref:s,icon:A})),K=n.forwardRef(G);var q={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},J.apply(this,arguments)}const Q=(e,s)=>n.createElement(v,J({},e,{ref:s,icon:q})),W=n.forwardRef(Q);var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Z.apply(this,arguments)}const ee=(e,s)=>n.createElement(v,Z({},e,{ref:s,icon:Y})),se=n.forwardRef(ee),te=({src:s,size:t=48,name:l,online:a=!1,className:r=""})=>e.jsxs("div",{className:`relative ${r}`,children:[e.jsx(B,{src:s,size:t,className:"border-2 border-purple-500/50",children:(null==l?void 0:l.charAt(0))||"用"}),a&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gradient-to-r from-purple-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),le=({userDetailVisible:s,setUserDetailVisible:t,selectedUser:l,getSexDisplay:a,getLevelName:r,getLinggenColor:n})=>{var x;return e.jsx(o,{title:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xl font-bold text-white",children:"corrupted"===(null==l?void 0:l.数据状态)?"损坏数据详情":"用户详情"})}),open:s,onCancel:()=>t(!1),footer:null,className:"xiuxian-modal",closeIcon:e.jsx(d,{className:"text-white"}),width:"corrupted"===(null==l?void 0:l.数据状态)?1200:800,children:l&&e.jsx("div",{className:"space-y-6",children:"corrupted"===l.数据状态?e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-red-400 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),"损坏数据 - 原始JSON内容"]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-pink-500/10 backdrop-blur-xl border border-red-500/30 rounded-xl p-4",children:[e.jsxs("p",{className:"text-sm text-red-300 mb-2",children:["错误信息: ",l.错误信息]}),e.jsx("pre",{className:"text-xs text-slate-300 overflow-auto max-h-96 bg-slate-800/50 p-3 rounded-lg border border-slate-700/50",children:l.原始数据})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"基础信息"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"用户ID",value:l.id,gradient:"blue"}),e.jsx(i,{label:"名号",value:l.名号,gradient:"blue"}),e.jsx(i,{label:"性别",value:a(l.sex),gradient:"blue"}),e.jsx(i,{label:"境界",value:r(l.level_id),gradient:"blue"}),e.jsx(i,{label:"灵根",value:e.jsx(c,{color:n(l.灵根),className:"border-0",style:{background:`linear-gradient(135deg, ${n(l.灵根)}20, ${n(l.灵根)}40)`,color:n(l.灵根),border:`1px solid ${n(l.灵根)}30`},children:(null==(x=l.灵根)?void 0:x.name)||"未知"}),gradient:"blue"}),e.jsx(i,{label:"修炼效率",value:`${(100*(l.修炼效率提升||0)).toFixed(2)}%`,gradient:"blue"}),e.jsx(i,{label:"宣言",value:l.宣言||"这个人很懒还没有写",gradient:"blue",fullWidth:!0})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),"战斗属性"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(i,{label:"攻击力",value:(l.攻击||0).toLocaleString(),gradient:"blue"}),e.jsx(i,{label:"防御力",value:(l.防御||0).toLocaleString(),gradient:"green"}),e.jsx(i,{label:"当前血量",value:(l.当前血量||0).toLocaleString(),gradient:"red"}),e.jsx(i,{label:"血量上限",value:(l.血量上限||0).toLocaleString(),gradient:"orange"}),e.jsx(i,{label:"暴击率",value:`${(100*(l.暴击率||0)).toFixed(2)}%`,gradient:"purple"}),e.jsx(i,{label:"暴击伤害",value:`${l.暴击伤害}%`,gradient:"indigo"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"资源信息"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(i,{label:"灵石",value:(l.灵石||0).toLocaleString(),gradient:"green"}),e.jsx(i,{label:"神石",value:(l.神石||0).toLocaleString(),gradient:"yellow"}),e.jsx(i,{label:"轮回点",value:l.轮回点,gradient:"purple"}),e.jsx(i,{label:"修为",value:(l.修为||0).toLocaleString(),gradient:"blue"}),e.jsx(i,{label:"血气",value:(l.血气||0).toLocaleString(),gradient:"red"}),e.jsx(i,{label:"好感度",value:l.favorability,gradient:"pink"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"成就信息"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(i,{label:"镇妖塔层数",value:l.镇妖塔层数,gradient:"orange"}),e.jsx(i,{label:"神魄段数",value:l.神魄段数,gradient:"indigo"}),e.jsx(i,{label:"魔道值",value:l.魔道值,gradient:"red"}),e.jsx(i,{label:"轮回次数",value:l.lunhui,gradient:"purple"}),e.jsx(i,{label:"连续签到",value:l.连续签到天数,gradient:"green"}),e.jsx(i,{label:"幸运值",value:l.幸运,gradient:"yellow"})]})]})]})})})},{Option:ae}=a;function re({visible:s,onCancel:t,onSave:i,user:c,loading:d=!1}){const[h]=m.useForm(),[f,v]=n.useState(null);n.useEffect(()=>{s&&c&&(v({...c}),h.setFieldsValue({id:c.id,"名号":c.名号,sex:c.sex,level_id:c.level_id,"宣言":c.宣言,"攻击":c.攻击,"防御":c.防御,"当前血量":c.当前血量,"血量上限":c.血量上限,"暴击率":c.暴击率,"暴击伤害":c.暴击伤害,"灵石":c.灵石,"神石":c.神石,"轮回点":c.轮回点,"修为":c.修为,"血气":c.血气,favorability:c.favorability,"镇妖塔层数":c.镇妖塔层数,"神魄段数":c.神魄段数,"魔道值":c.魔道值,lunhui:c.lunhui,"连续签到天数":c.连续签到天数,"幸运":c.幸运}))},[s,c,h]);return e.jsx(o,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-white",children:"编辑用户"}),e.jsxs("span",{className:"text-slate-300",children:["用户ID: ",null==c?void 0:c.id]})]}),open:s,onCancel:t,width:1200,footer:[e.jsx(r,{onClick:t,className:"bg-slate-600 border-slate-500 text-white",children:"取消"},"cancel"),e.jsx(r,{type:"primary",icon:e.jsx(S,{}),onClick:async()=>{try{const e=await h.validateFields();if(f){const s={...f,...e};i(s)}}catch(e){}},loading:d,className:"bg-gradient-to-r from-purple-500 to-pink-500 border-0",children:"保存"},"save")],className:"user-edit-modal xiuxian-modal",children:e.jsx("div",{className:"space-y-6",children:e.jsx(m,{form:h,layout:"vertical",children:e.jsx(g,{type:"card",className:"xiuxian-tabs",tabBarStyle:{backgroundColor:"rgba(30, 41, 59, 0.8)",borderBottom:"1px solid rgba(71, 85, 105, 0.5)"},items:[{key:"basic",label:e.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[e.jsx(b,{}),"基础信息"]}),children:e.jsx("div",{className:"p-4",children:e.jsxs(u,{gutter:16,children:[e.jsx(p,{span:8,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"用户ID"}),name:"id",rules:[{required:!0,message:"请输入用户ID"}],children:e.jsx(l,{className:"xiuxian-input",disabled:!0})})}),e.jsx(p,{span:8,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"名号"}),name:"名号",rules:[{required:!0,message:"请输入名号"}],children:e.jsx(l,{className:"xiuxian-input"})})}),e.jsx(p,{span:8,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"性别"}),name:"sex",children:e.jsxs(a,{className:"xiuxian-select",children:[e.jsx(ae,{value:"男",children:"男"}),e.jsx(ae,{value:"女",children:"女"})]})})}),e.jsx(p,{span:8,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"境界"}),name:"level_id",children:e.jsx(a,{className:"xiuxian-select",children:Object.entries(x).map(([s,t])=>e.jsx(ae,{value:parseInt(s),children:t},s))})})}),e.jsx(p,{span:16,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"宣言"}),name:"宣言",children:e.jsx(l.TextArea,{rows:2,className:"xiuxian-input"})})})]})})},{key:"combat",label:e.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[e.jsx(W,{}),"战斗属性"]}),children:e.jsx("div",{className:"p-4",children:e.jsxs(u,{gutter:16,children:[e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"攻击力"}),name:"攻击",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"防御力"}),name:"防御",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"当前血量"}),name:"当前血量",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"血量上限"}),name:"血量上限",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"暴击率"}),name:"暴击率",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,max:1,step:.01,formatter:e=>`${(100*Number(e)).toFixed(2)}%`,parser:e=>(null==e?void 0:e.replace("%",""))?Number(null==e?void 0:e.replace("%",""))/100:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"暴击伤害"}),name:"暴击伤害",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}%`,parser:e=>(null==e?void 0:e.replace("%",""))||0})})})]})})},{key:"resources",label:e.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[e.jsx(H,{}),"修仙资源"]}),children:e.jsx("div",{className:"p-4",children:e.jsxs(u,{gutter:16,children:[e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"灵石"}),name:"灵石",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"神石"}),name:"神石",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"轮回点"}),name:"轮回点",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"修为"}),name:"修为",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"血气"}),name:"血气",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"好感度"}),name:"favorability",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})})]})})},{key:"achievements",label:e.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[e.jsx(y,{}),"修仙成就"]}),children:e.jsx("div",{className:"p-4",children:e.jsxs(u,{gutter:16,children:[e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"镇妖塔层数"}),name:"镇妖塔层数",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"神魄段数"}),name:"神魄段数",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"魔道值"}),name:"魔道值",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"轮回次数"}),name:"lunhui",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"连续签到天数"}),name:"连续签到天数",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),e.jsx(p,{span:6,children:e.jsx(m.Item,{label:e.jsx("span",{className:"text-slate-200",children:"幸运值"}),name:"幸运",children:e.jsx(j,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})})]})})}]})})})})}function ie(){const{gameUsers:l,loading:a,searchText:r,setSearchText:i,setSelectedUser:o,setUserDetailVisible:d,setUserEditVisible:m,stats:g,pagination:u,fetchGameUsers:p,handleSearchAndFilter:j,handleTableChange:v,handleEditUser:S,handleSaveUser:B,getSexDisplay:F,getLinggenColor:P,getLevelName:M,userDetailVisible:A,userEditVisible:_,editLoading:G,selectedUser:q}=(()=>{const{user:e}=s(),[t,l]=n.useState([]),[a,r]=n.useState(!1),[i,o]=n.useState(""),[c,d]=n.useState(null),[m,g]=n.useState(!1),[u,p]=n.useState(!1),[b,j]=n.useState(!1),[f,v]=n.useState({current:1,pageSize:h,total:0,totalPages:0}),[w,N]=n.useState({total:0,highLevel:0,mediumLevel:0,lowLevel:0,totalLingshi:0,totalShenshi:0,totalLunhui:0}),y=async(s=1,t=h)=>{if(e){r(!0);try{const e=localStorage.getItem("token");if(!e)return void O.error("未找到登录令牌");const a=await I(e,{page:s,pageSize:t,search:i});a.success&&a.data?(l(a.data.list),v(a.data.pagination)):O.error(a.message||"获取用户数据失败")}catch(a){O.error("获取用户数据失败")}finally{r(!1)}}};n.useEffect(()=>{y(1,20),S()},[e]);const S=async()=>{if(e)try{const e=localStorage.getItem("token");if(!e)return void O.error("未找到登录令牌");const s=await L(e,{search:i});s.success&&s.data&&N(s.data)}catch(s){}};return{gameUsers:t,loading:a,searchText:i,selectedUser:c,userDetailVisible:m,userEditVisible:u,editLoading:b,pagination:f,stats:w,getLevelName:e=>x[e]||`境界${e}`,getSexDisplay:e=>"0"===e?"男":"1"===e?"女":"未知",getLinggenColor:e=>{if(!e)return"default";const s=(null==e?void 0:e.name)||"";return s.includes("混沌")||s.includes("天五")||s.includes("九转")?"gold":s.includes("五灵")||s.includes("九重")?"purple":s.includes("三灵")||s.includes("双灵")?"blue":"green"},handleSearchAndFilter:()=>{y(1,f.pageSize),S()},handleTableChange:(e,s)=>{y(e,s)},handleEditUser:e=>{d(e),p(!0)},handleSaveUser:async e=>{j(!0);try{const s=localStorage.getItem("token");if(!s)return void O.error("未找到登录令牌");const t=await k(s,e);t.success?(O.success("用户更新成功"),p(!1),y(f.current,f.pageSize),S()):O.error(t.message||"用户更新失败")}catch(s){O.error("用户更新失败")}finally{j(!1)}},fetchGameUsers:y,fetchStats:S,setSearchText:o,setSelectedUser:d,setUserDetailVisible:g,setUserEditVisible:p}})(),J=[{title:e.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:[e.jsx(b,{className:"text-lg"}),e.jsx("span",{children:"修仙者信息"})]}),key:"userInfo",width:220,render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl shadow-lg",children:[e.jsx(te,{src:t.avatar,size:48,name:t.名号,online:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white text-lg mb-1",children:t.名号}),e.jsxs("div",{className:"text-xs text-slate-400 bg-slate-700/50 px-2 py-1 rounded-full inline-block",children:["ID: ",t.id]}),e.jsxs("div",{className:"text-xs text-slate-300 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(K,{className:"text-pink-400"}),F(t.sex)]}),e.jsx("span",{className:"mx-2 text-slate-500",children:"|"}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(X,{className:"text-yellow-400"}),"轮回: ",t.lunhui]})]})]})]})},{title:e.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:[e.jsx(y,{className:"text-lg"}),e.jsx("span",{children:"境界修为"})]}),key:"level",width:160,render:(s,t)=>e.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/30 rounded-xl shadow-lg",children:[e.jsx("div",{className:"font-bold text-blue-400 text-lg mb-2",children:x[t.level_id]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["修为: ",(t.修为||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["血气: ",(t.血气||0).toLocaleString()]})]})]})},{title:e.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:[e.jsx(se,{className:"text-lg"}),e.jsx("span",{children:"灵根资质"})]}),key:"linggen",width:130,render:(s,t)=>{var l;return e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/30 rounded-xl shadow-lg",children:e.jsx(c,{color:P(t.灵根),className:"text-sm font-bold px-3 py-1 border-0",children:(null==(l=t.灵根)?void 0:l.name)||"未知"})})}},{title:e.jsxs("div",{className:"flex items-center gap-2 text-red-400 font-bold",children:[e.jsx(W,{className:"text-lg"}),e.jsx("span",{children:"战斗属性"})]}),key:"combat",width:160,render:(s,t)=>e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500/10 to-orange-500/10 backdrop-blur-xl border border-red-500/30 rounded-xl shadow-lg",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["攻击: ",(t.攻击||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["防御: ",(t.防御||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["血量: ",(t.当前血量||0).toLocaleString(),"/",(t.血量上限||0).toLocaleString()]})]})})},{title:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:[e.jsx(H,{className:"text-lg"}),e.jsx("span",{children:"修仙资源"})]}),key:"resources",width:140,render:(s,t)=>e.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500/10 to-amber-500/10 backdrop-blur-xl border border-yellow-500/30 rounded-xl shadow-lg",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-green-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["灵石: ",(t.灵石||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-yellow-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["神石: ",(t.神石||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-purple-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["轮回点: ",t.轮回点]})]})})},{title:e.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:[e.jsx(R,{className:"text-lg"}),e.jsx("span",{children:"修仙成就"})]}),key:"achievements",width:140,render:(s,t)=>e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 backdrop-blur-xl border border-purple-500/30 rounded-xl shadow-lg",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["镇妖塔: ",t.镇妖塔层数,"层"]}),e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["神魄段: ",t.神魄段数,"段"]}),e.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["魔道值: ",t.魔道值]})]})})},{title:e.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:[e.jsx(E,{className:"text-lg"}),e.jsx("span",{children:"操作"})]}),key:"actions",width:150,render:(s,t)=>e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx(N,{title:"查看修仙详情",children:e.jsxs("button",{className:"w-full px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 text-sm flex items-center gap-2",onClick:()=>{o(t),d(!0)},children:[e.jsx(E,{}),"查看"]})}),e.jsx(N,{title:"编辑用户信息",children:e.jsxs("button",{className:"w-full px-3 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 text-sm flex items-center gap-2",onClick:()=>S(t),children:[e.jsx(f,{}),"编辑"]})})]})}];return e.jsxs(C,{children:[e.jsx(z,{icon:e.jsx(y,{}),title:"用户管理",subtitle:"管理修仙界众位道友信息",actions:e.jsx(D,{loading:a,onClick:()=>p(1,u.pageSize)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx($,{title:"总修仙者",value:(g.total||0).toLocaleString(),icon:e.jsx(b,{}),gradient:"blue"}),e.jsx($,{title:"高阶修士",value:(g.highLevel||0).toLocaleString(),icon:e.jsx(y,{}),gradient:"green"}),e.jsx($,{title:"总灵石",value:(Number(g.totalLingshi)||0).toLocaleString("en-US",{notation:"compact",maximumFractionDigits:2}),icon:e.jsx(R,{}),gradient:"purple"}),e.jsx($,{title:"总轮回",value:(g.totalLunhui||0).toLocaleString(),icon:e.jsx(V,{}),gradient:"yellow"})]}),e.jsx(U,{placeholder:"搜索修仙者名号或ID...",value:r,onChange:i,onSearch:j,onKeyPress:e=>"Enter"===e.key&&j(),className:"mb-6"}),e.jsx(w,{title:"修仙者列表",icon:e.jsx(b,{}),children:e.jsx(T,{columns:J,dataSource:l,rowKey:"id",loading:a,rowClassName:e=>t({"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-l-4 border-yellow-400 bg-slate-700 hover:bg-slate-600":"corrupted"===e.数据状态,"hover:bg-gradient-to-r hover:from-purple-500/10 hover:to-blue-500/10 transition-all duration-300 bg-slate-700 hover:bg-slate-600":"corrupted"!==e.数据状态}),pagination:{current:u.current,pageSize:u.pageSize,total:u.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`第 ${s[0]}-${s[1]} 条，共 ${e} 条`},onPaginationChange:v,scroll:{x:1200}})}),e.jsx(le,{userDetailVisible:A,setUserDetailVisible:d,selectedUser:q,getSexDisplay:F,getLevelName:M,getLinggenColor:P}),e.jsx(re,{visible:_,onCancel:()=>m(!1),onSave:B,user:q,loading:G,getSexDisplay:F,getLinggenColor:P})]})}export{ie as default};
