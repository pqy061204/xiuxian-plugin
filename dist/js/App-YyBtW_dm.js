import{a as e,j as t}from"./index-1Buk7MHt.js";import{r as s,g as a,b as n,d as r}from"./react-vendor-a03lyGlx.js";import{F as i}from"./index-B6EMR5lY.js";import{s as o}from"./index-CM58c4md.js";import{c as l}from"./index-Cy_K9d2s.js";import{C as c,u as d,I as u,S as m,B as h}from"./XiuxianUserSelector-BMQSkCjs.js";import{X as x,R as g}from"./XiuxianStatCard-BmdM8AWM.js";import{I as f,g as p,i as b,X as v}from"./XiuxianTableContainer-Ck0rxAnn.js";import{R as j}from"./UserOutlined-BQiCioLg.js";import{X as y}from"./XiuxianTableWithPagination-Dlo1fuVA.js";import{g as w,m as $,r as N,K as S,u as C,C as O,c as k,a as _}from"./reactNode-CNKl2Mmk.js";import{T as M}from"./index-BWmXdBtd.js";import{S as I}from"./Table-D7hXmRTc.js";import{R as z}from"./EyeOutlined-CLanTFnW.js";import{R as D,C as E}from"./row-CtRU1SjW.js";import{M as T}from"./index-wAhsvofi.js";import{C as H,R as B}from"./index-CpR1QwKE.js";import{X as R,a as L}from"./XiuxianPageTitle-ClGkPvjU.js";import{X as P}from"./XiuxianRefreshButton-j6mRwBxx.js";import"./extendsObject-C6YrUve6.js";import"./context-Be8oxecN.js";import"./index-BMwxKtRD.js";import"./index-DdhvtcVO.js";import"./index-D9ywTypt.js";var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},W.apply(this,arguments)}const V=(e,t)=>s.createElement(f,W({},e,{ref:t,icon:F})),Y=s.forwardRef(V);var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},X.apply(this,arguments)}const Z=(e,t)=>s.createElement(f,X({},e,{ref:t,icon:A})),G=s.forwardRef(Z);var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},q.apply(this,arguments)}const J=(e,t)=>s.createElement(f,q({},e,{ref:t,icon:U})),K=s.forwardRef(J);var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ee.apply(this,arguments)}const te=(e,t)=>s.createElement(f,ee({},e,{ref:t,icon:Q})),se=s.forwardRef(te);var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ne.apply(this,arguments)}const re=(e,t)=>s.createElement(f,ne({},e,{ref:t,icon:ae})),ie=s.forwardRef(re),oe=new S("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),le=new S("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),ce=new S("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),de=new S("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),ue=new S("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),me=new S("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),he=e=>{const{fontHeight:t,lineWidth:s,marginXS:a,colorBorderBg:n}=e,r=t,i=s,o=e.colorTextLightSolid,l=e.colorError,c=e.colorErrorHover;return $(e,{badgeFontHeight:r,badgeShadowSize:i,badgeTextColor:o,badgeColor:l,badgeColorHover:c,badgeShadowColor:n,badgeProcessingDuration:"1.2s",badgeRibbonOffset:a,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},xe=e=>{const{fontSize:t,lineHeight:s,fontSizeSM:a,lineWidth:n}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*s)-2*n,indicatorHeightSM:t,dotSize:a/2,textFontSize:a,textFontSizeSM:a,textFontWeight:"normal",statusSize:a/2}},ge=w("Badge",e=>(e=>{const{componentCls:t,iconCls:s,antCls:a,badgeShadowSize:n,textFontSize:r,textFontSizeSM:i,statusSize:o,dotSize:l,textFontWeight:c,indicatorHeight:d,indicatorHeightSM:u,marginXS:m,calc:h}=e,x=`${a}-scroll-number`,g=p(e,(e,{darkColor:s})=>({[`&${t} ${t}-color-${e}`]:{background:s,[`&:not(${t}-count)`]:{color:s},"a:hover &":{background:s}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:d,height:d,color:e.badgeTextColor,fontWeight:c,fontSize:r,lineHeight:C(d),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:h(d).div(2).equal(),boxShadow:`0 0 0 ${C(n)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:u,height:u,fontSize:i,lineHeight:C(u),borderRadius:h(u).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${C(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:l,minWidth:l,height:l,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${C(n)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${x}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${s}-spin`]:{animationName:me,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:o,height:o,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:n,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:oe,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:m,color:e.colorText,fontSize:e.fontSize}}}),g),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:le,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:ce,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:de,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:ue,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${x}-custom-component, ${t}-count`]:{transform:"none"},[`${x}-custom-component, ${x}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[x]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${x}-only`]:{position:"relative",display:"inline-block",height:d,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${x}-only-unit`]:{height:d,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${x}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${x}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}})(he(e)),xe),fe=w(["Badge","Ribbon"],e=>(e=>{const{antCls:t,badgeFontHeight:s,marginXS:a,badgeRibbonOffset:n,calc:r}=e,i=`${t}-ribbon`,o=`${t}-ribbon-wrapper`,l=p(e,(e,{darkColor:t})=>({[`&${i}-color-${e}`]:{background:t,color:t}}));return{[o]:{position:"relative"},[i]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"absolute",top:a,padding:`0 ${C(e.paddingXS)}`,color:e.colorPrimary,lineHeight:C(s),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${i}-text`]:{color:e.badgeTextColor},[`${i}-corner`]:{position:"absolute",top:"100%",width:n,height:n,color:"currentcolor",border:`${C(r(n).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),l),{[`&${i}-placement-end`]:{insetInlineEnd:r(n).mul(-1).equal(),borderEndEndRadius:0,[`${i}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${i}-placement-start`]:{insetInlineStart:r(n).mul(-1).equal(),borderEndStartRadius:0,[`${i}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}})(he(e)),xe),pe=e=>{const{prefixCls:t,value:a,current:n,offset:r=0}=e;let i;return r&&(i={position:"absolute",top:`${r}00%`,left:0}),s.createElement("span",{style:i,className:l(`${t}-only-unit`,{current:n})},a)};function be(e,t,s){let a=e,n=0;for(;(a+10)%10!==t;)a+=s,n+=s;return n}const ve=e=>{const{prefixCls:t,count:a,value:n}=e,r=Number(n),i=Math.abs(a),[o,l]=s.useState(r),[c,d]=s.useState(i),u=()=>{l(r),d(i)};let m,h;if(s.useEffect(()=>{const e=setTimeout(u,1e3);return()=>clearTimeout(e)},[r]),o===r||Number.isNaN(r)||Number.isNaN(o))m=[s.createElement(pe,Object.assign({},e,{key:r,current:!0}))],h={transition:"none"};else{m=[];const t=r+10,a=[];for(let e=r;e<=t;e+=1)a.push(e);const n=c<i?1:-1,l=a.findIndex(e=>e%10===o);m=(n<0?a.slice(0,l+1):a.slice(l)).map((t,a)=>{const r=t%10;return s.createElement(pe,Object.assign({},e,{key:t,value:r,offset:n<0?a-l:a,current:a===l}))}),h={transform:`translateY(${-be(o,r,n)}00%)`}}return s.createElement("span",{className:`${t}-only`,style:h,onTransitionEnd:u},m)};const je=s.forwardRef((e,t)=>{const{prefixCls:a,count:n,className:r,motionClassName:i,style:o,title:c,show:d,component:u="sup",children:m}=e,h=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:x}=s.useContext(O),g=x("scroll-number",a),f=Object.assign(Object.assign({},h),{"data-show":d,style:o,className:l(g,r,i),title:c});let p=n;if(n&&Number(n)%1==0){const e=String(n).split("");p=s.createElement("bdi",null,e.map((t,a)=>s.createElement(ve,{prefixCls:g,count:Number(n),value:t,key:e.length-a})))}return(null==o?void 0:o.borderColor)&&(f.style=Object.assign(Object.assign({},o),{boxShadow:`0 0 0 1px ${o.borderColor} inset`})),m?k(m,e=>({className:l(`${g}-custom-component`,null==e?void 0:e.className,i)})):s.createElement(u,Object.assign({},f,{ref:t}),p)});const ye=s.forwardRef((e,t)=>{var a,n,r,i,o;const{prefixCls:d,scrollNumberPrefixCls:u,children:m,status:h,text:x,color:g,count:f=null,overflowCount:p=99,dot:v=!1,size:j="default",title:y,offset:w,style:$,className:N,rootClassName:S,classNames:C,styles:_,showZero:M=!1}=e,I=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:z,direction:D,badge:E}=s.useContext(O),T=z("badge",d),[H,B,R]=ge(T),L=f>p?`${p}+`:f,P="0"===L||0===L,F=null===f||P&&!M,W=(null!=h||null!=g)&&F,V=null!=h||!P,Y=v&&!P,A=Y?"":L,X=s.useMemo(()=>(null==A||""===A||P&&!M)&&!Y,[A,P,M,Y]),Z=s.useRef(f);X||(Z.current=f);const G=Z.current,U=s.useRef(A);X||(U.current=A);const q=U.current,J=s.useRef(Y);X||(J.current=Y);const K=s.useMemo(()=>{if(!w)return Object.assign(Object.assign({},null==E?void 0:E.style),$);const e={marginTop:w[1]};return"rtl"===D?e.left=parseInt(w[0],10):e.right=-parseInt(w[0],10),Object.assign(Object.assign(Object.assign({},e),null==E?void 0:E.style),$)},[D,w,$,null==E?void 0:E.style]),Q=null!=y?y:"string"==typeof G||"number"==typeof G?G:void 0,ee=X||!x?null:s.createElement("span",{className:`${T}-status-text`},x),te=G&&"object"==typeof G?k(G,e=>({style:Object.assign(Object.assign({},K),e.style)})):void 0,se=b(g,!1),ae=l(null==C?void 0:C.indicator,null===(a=null==E?void 0:E.classNames)||void 0===a?void 0:a.indicator,{[`${T}-status-dot`]:W,[`${T}-status-${h}`]:!!h,[`${T}-color-${g}`]:se}),ne={};g&&!se&&(ne.color=g,ne.background=g);const re=l(T,{[`${T}-status`]:W,[`${T}-not-a-wrapper`]:!m,[`${T}-rtl`]:"rtl"===D},N,S,null==E?void 0:E.className,null===(n=null==E?void 0:E.classNames)||void 0===n?void 0:n.root,null==C?void 0:C.root,B,R);if(!m&&W&&(x||V||!F)){const e=K.color;return H(s.createElement("span",Object.assign({},I,{className:re,style:Object.assign(Object.assign(Object.assign({},null==_?void 0:_.root),null===(r=null==E?void 0:E.styles)||void 0===r?void 0:r.root),K)}),s.createElement("span",{className:ae,style:Object.assign(Object.assign(Object.assign({},null==_?void 0:_.indicator),null===(i=null==E?void 0:E.styles)||void 0===i?void 0:i.indicator),ne)}),x&&s.createElement("span",{style:{color:e},className:`${T}-status-text`},x)))}return H(s.createElement("span",Object.assign({ref:t},I,{className:re,style:Object.assign(Object.assign({},null===(o=null==E?void 0:E.styles)||void 0===o?void 0:o.root),null==_?void 0:_.root)}),m,s.createElement(c,{visible:!X,motionName:`${T}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:e})=>{var t,a;const n=z("scroll-number",u),r=J.current,i=l(null==C?void 0:C.indicator,null===(t=null==E?void 0:E.classNames)||void 0===t?void 0:t.indicator,{[`${T}-dot`]:r,[`${T}-count`]:!r,[`${T}-count-sm`]:"small"===j,[`${T}-multiple-words`]:!r&&q&&q.toString().length>1,[`${T}-status-${h}`]:!!h,[`${T}-color-${g}`]:se});let o=Object.assign(Object.assign(Object.assign({},null==_?void 0:_.indicator),null===(a=null==E?void 0:E.styles)||void 0===a?void 0:a.indicator),K);return g&&!se&&(o=o||{},o.background=g),s.createElement(je,{prefixCls:n,show:!X,motionClassName:e,className:i,count:q,title:Q,style:o,key:"scrollNumber"},te)}),ee))});ye.Ribbon=e=>{const{className:t,prefixCls:a,style:n,color:r,children:i,text:o,placement:c="end",rootClassName:d}=e,{getPrefixCls:u,direction:m}=s.useContext(O),h=u("ribbon",a),x=`${h}-wrapper`,[g,f,p]=fe(h,x),v=b(r,!1),j=l(h,`${h}-placement-${c}`,{[`${h}-rtl`]:"rtl"===m,[`${h}-color-${r}`]:v},t),y={},w={};return r&&!v&&(y.background=r,w.color=r),g(s.createElement("div",{className:l(x,d,f,p)},i,s.createElement("div",{className:l(j,f),style:Object.assign(Object.assign({},y),n)},s.createElement("span",{className:`${h}-text`},o),s.createElement("div",{className:`${h}-corner`,style:w}))))};var we={exports:{}};const $e=a(we.exports=function(){var e=1e3,t=6e4,s=36e5,a="millisecond",n="second",r="minute",i="hour",o="day",l="week",c="month",d="quarter",u="year",m="date",h="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}},p=function(e,t,s){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(s)+e},b={s:p,z:function(e){var t=-e.utcOffset(),s=Math.abs(t),a=Math.floor(s/60),n=s%60;return(t<=0?"+":"-")+p(a,2,"0")+":"+p(n,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var a=12*(s.year()-t.year())+(s.month()-t.month()),n=t.clone().add(a,c),r=s-n<0,i=t.clone().add(a+(r?-1:1),c);return+(-(a+(s-n)/(r?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:l,d:o,D:m,h:i,m:r,s:n,ms:a,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",j={};j[v]=f;var y="$isDayjsObject",w=function(e){return e instanceof C||!(!e||!e[y])},$=function e(t,s,a){var n;if(!t)return v;if("string"==typeof t){var r=t.toLowerCase();j[r]&&(n=r),s&&(j[r]=s,n=r);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var o=t.name;j[o]=t,n=o}return!a&&n&&(v=n),n||!a&&v},N=function(e,t){if(w(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new C(s)},S=b;S.l=$,S.i=w,S.w=function(e,t){return N(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function f(e){this.$L=$(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[y]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(x);if(a){var n=a[2]-1||0,r=(a[7]||"0").substring(0,3);return s?new Date(Date.UTC(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)):new Date(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return S},p.isValid=function(){return!(this.$d.toString()===h)},p.isSame=function(e,t){var s=N(e);return this.startOf(t)<=s&&s<=this.endOf(t)},p.isAfter=function(e,t){return N(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<N(e)},p.$g=function(e,t,s){return S.u(e)?this[t]:this.set(s,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var s=this,a=!!S.u(t)||t,d=S.p(e),h=function(e,t){var n=S.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return a?n:n.endOf(o)},x=function(e,t){return S.w(s.toDate()[e].apply(s.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},g=this.$W,f=this.$M,p=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case u:return a?h(1,0):h(31,11);case c:return a?h(1,f):h(0,f+1);case l:var v=this.$locale().weekStart||0,j=(g<v?g+7:g)-v;return h(a?p-j:p+(6-j),f);case o:case m:return x(b+"Hours",0);case i:return x(b+"Minutes",1);case r:return x(b+"Seconds",2);case n:return x(b+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var s,l=S.p(e),d="set"+(this.$u?"UTC":""),h=(s={},s[o]=d+"Date",s[m]=d+"Date",s[c]=d+"Month",s[u]=d+"FullYear",s[i]=d+"Hours",s[r]=d+"Minutes",s[n]=d+"Seconds",s[a]=d+"Milliseconds",s)[l],x=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(m,1);g.$d[h](x),g.init(),this.$d=g.set(m,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](x);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[S.p(e)]()},p.add=function(a,d){var m,h=this;a=Number(a);var x=S.p(d),g=function(e){var t=N(h);return S.w(t.date(t.date()+Math.round(e*a)),h)};if(x===c)return this.set(c,this.$M+a);if(x===u)return this.set(u,this.$y+a);if(x===o)return g(1);if(x===l)return g(7);var f=(m={},m[r]=t,m[i]=s,m[n]=e,m)[x]||1,p=this.$d.getTime()+a*f;return S.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||h;var a=e||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),r=this.$H,i=this.$m,o=this.$M,l=s.weekdays,c=s.months,d=s.meridiem,u=function(e,s,n,r){return e&&(e[s]||e(t,a))||n[s].slice(0,r)},m=function(e){return S.s(r%12||12,e,"0")},x=d||function(e,t,s){var a=e<12?"AM":"PM";return s?a.toLowerCase():a};return a.replace(g,function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return u(s.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(s.weekdaysMin,t.$W,l,2);case"ddd":return u(s.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return S.s(r,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return x(r,i,!0);case"A":return x(r,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(a,m,h){var x,g=this,f=S.p(m),p=N(a),b=(p.utcOffset()-this.utcOffset())*t,v=this-p,j=function(){return S.m(g,p)};switch(f){case u:x=j()/12;break;case c:x=j();break;case d:x=j()/3;break;case l:x=(v-b)/6048e5;break;case o:x=(v-b)/864e5;break;case i:x=v/s;break;case r:x=v/t;break;case n:x=v/e;break;default:x=v}return h?x:S.a(x)},p.daysInMonth=function(){return this.endOf(c).$D},p.$locale=function(){return j[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),a=$(e,t,!0);return a&&(s.$L=a),s},p.clone=function(){return S.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),O=C.prototype;return N.prototype=O,[["$ms",a],["$s",n],["$m",r],["$H",i],["$W",o],["$M",c],["$y",u],["$D",m]].forEach(function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),N.extend=function(e,t){return e.$i||(e(t,C,N),e.$i=!0),N},N.locale=$,N.isDayjs=w,N.unix=function(e){return N(1e3*e)},N.en=j[v],N.Ls=j,N.p={},N}()),Ne=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{[`&${t}`]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},Se=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:s,colorSplit:a,lineWidth:n,textPaddingInline:r,orientationMargin:i,verticalMarginInline:o}=e;return{[t]:Object.assign(Object.assign({},N(e)),{borderBlockStart:`${C(n)} solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${C(n)} solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${C(e.marginLG)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${C(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${C(n)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${i} * 100%)`},"&::after":{width:`calc(100% - ${i} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${i} * 100%)`},"&::after":{width:`calc(${i} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:r},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${C(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:`${C(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:s}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:s}}})}},Ce=w("Divider",e=>{const t=$(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[Se(t),Ne(t)]},e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}});const Oe={small:"sm",middle:"md"},ke=e=>{const{getPrefixCls:t,direction:a,className:n,style:r}=_("divider"),{prefixCls:i,type:o="horizontal",orientation:c="center",orientationMargin:u,className:m,rootClassName:h,children:x,dashed:g,variant:f="solid",plain:p,style:b,size:v}=e,j=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),y=t("divider",i),[w,$,N]=Ce(y),S=d(v),C=Oe[S],O=!!x,k=s.useMemo(()=>"left"===c?"rtl"===a?"end":"start":"right"===c?"rtl"===a?"start":"end":c,[a,c]),M="start"===k&&null!=u,I="end"===k&&null!=u,z=l(y,n,$,N,`${y}-${o}`,{[`${y}-with-text`]:O,[`${y}-with-text-${k}`]:O,[`${y}-dashed`]:!!g,[`${y}-${f}`]:"solid"!==f,[`${y}-plain`]:!!p,[`${y}-rtl`]:"rtl"===a,[`${y}-no-default-orientation-margin-start`]:M,[`${y}-no-default-orientation-margin-end`]:I,[`${y}-${C}`]:!!C},m,h),D=s.useMemo(()=>"number"==typeof u?u:/^\d+$/.test(u)?Number(u):u,[u]),E={marginInlineStart:M?D:void 0,marginInlineEnd:I?D:void 0};return w(s.createElement("div",Object.assign({className:z,style:Object.assign(Object.assign({},r),b)},j,{role:"separator"}),x&&"vertical"!==o&&s.createElement("span",{className:`${y}-inner-text`,style:E},x)))},_e=()=>{const[t,s]=r.useState(!1),[a,n]=r.useState([]),[l,c]=r.useState([]),[d,u]=r.useState(null),[m,h]=r.useState(null),[x,g]=r.useState("users"),[f,p]=r.useState(!1),[b,v]=r.useState(null),[j]=i.useForm(),y=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/config",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取配置信息失败"}}catch(t){return{success:!1,message:"获取配置信息失败"}}})();t.success&&t.data?h(t.data):o.error(t.message||"获取配置信息失败")},w=async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/users",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取用户数据失败"}}catch(t){return{success:!1,message:"获取用户数据失败"}}})();t.success&&t.data?n(t.data):o.error(t.message||"获取用户数据失败")}catch(t){o.error("获取用户数据失败")}s(!1)},$=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/stats",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取统计数据失败"}}catch(t){return{success:!1,message:"获取统计数据失败"}}})();t.success&&t.data?u(t.data):o.error(t.message||"获取统计数据失败")};return r.useEffect(()=>{(async()=>{try{await Promise.all([y(),w(),$()])}catch(e){}})()},[]),{loading:t,users:a,records:l,stats:d,config:m,selectedTab:x,rechargeModalVisible:f,selectedUser:b,rechargeForm:j,setSelectedTab:g,setRechargeModalVisible:p,setSelectedUser:v,fetchUsers:w,fetchRecords:async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/records",method:"GET"});return 200===t.code?{success:!0,data:t.data.records}:{success:!1,message:t.message||"获取充值记录失败"}}catch(t){return{success:!1,message:"获取充值记录失败"}}})();t.success&&t.data?c(t.data):o.error(t.message||"获取充值记录失败")}catch(t){o.error("获取充值记录失败")}s(!1)},fetchStats:$,fetchConfig:y,handleRechargeOk:async t=>{try{const s=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:t});return 201===s.code?{success:!0,data:s.data}:{success:!1,message:s.message||"创建充值记录失败"}}catch(s){return{success:!1,message:"创建充值记录失败"}}})({action:t.type,userId:t.userId,tier:t.tier,paymentMethod:"admin",remark:t.remark});if(s.success&&s.data){const t=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:{action:"complete-payment",...t}});return 200===s.code?{success:!0}:{success:!1,message:s.message||"支付完成失败"}}catch(s){return{success:!1,message:"支付完成失败"}}})({recordId:s.data.id,transactionId:"ADMIN_"+Date.now(),paymentMethod:"admin"});t.success?(o.success("充值成功"),p(!1),v(null),j.resetFields(),w(),$()):o.error(t.message||"支付完成失败")}else o.error(s.message||"创建充值记录失败")}catch(s){o.error("充值操作失败，请重试")}}}},Me=({value:e,onChange:s,options:a,className:n="",size:r="default",variant:i="button"})=>{const o={small:"px-3 py-1.5 text-sm",default:"px-4 py-2 text-base",large:"px-6 py-3 text-lg"},l=e=>{var t;s&&!(null==(t=a.find(t=>t.value===e))?void 0:t.disabled)&&s(e)};return"button"===i?t.jsx("div",{className:`flex gap-2 ${n}`,children:a.map(s=>{const a=e===s.value,n=s.disabled;return t.jsx("button",{type:"button",disabled:n,onClick:()=>l(s.value),className:`\n                ${o[r]}\n                rounded-lg font-medium transition-all duration-200\n                ${a?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":n?"bg-slate-800/30 text-slate-500 border border-slate-700 cursor-not-allowed":"bg-slate-700/50 text-slate-300 border border-slate-600 hover:bg-slate-600/50 hover:text-white hover:border-slate-500"}\n                focus:outline-none focus:ring-2 focus:ring-purple-500/50\n              `,children:s.label},s.value)})}):t.jsx("div",{className:`space-y-2 ${n}`,children:a.map(s=>{const a=e===s.value,n=s.disabled;return t.jsxs("label",{className:`\n              flex items-center gap-3 cursor-pointer transition-all duration-200\n              ${n?"cursor-not-allowed opacity-50":"hover:text-white"}\n            `,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",value:s.value,checked:a,disabled:n,onChange:()=>l(s.value),className:"sr-only"}),t.jsx("div",{className:`\n                  w-4 h-4 border-2 rounded-full flex items-center justify-center\n                  transition-all duration-200\n                  ${a?"border-purple-500 bg-purple-500":n?"border-slate-600 bg-slate-800":"border-slate-500 bg-slate-700 hover:border-slate-400"}\n                `,children:a&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsx("span",{className:"text-sm "+(a?"text-white":"text-slate-300"),children:s.label})]},s.value)})})};function Ie({stats:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[t.jsx(x,{title:"总充值金额",value:`¥${e.total_amount.toLocaleString()}`,icon:t.jsx(Y,{}),gradient:"green"}),t.jsx(x,{title:"总充值次数",value:e.total_count.toLocaleString(),icon:t.jsx(Y,{}),gradient:"blue"}),t.jsx(x,{title:"首充用户数",value:e.first_recharge_users.toLocaleString(),icon:t.jsx(Y,{}),gradient:"purple"}),t.jsx(x,{title:"今日充值",value:`¥${e.today_amount.toLocaleString()}`,icon:t.jsx(Y,{}),gradient:"orange"})]})}function ze({selectedTab:e,onTabChange:s,onRecordsTabClick:a}){const n=[{name:"users",icon:t.jsx(j,{}),content:null},{name:"records",icon:t.jsx(ie,{}),content:null},{name:"stats",icon:t.jsx(Y,{}),content:null}];return t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex gap-4",children:n.map(n=>t.jsxs("button",{className:"px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 "+(e===n.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 border border-slate-600"),onClick:()=>{var e;"records"===(e=n.name)?a():s(e)},children:[n.icon,"users"===n.name&&"用户货币","records"===n.name&&"充值记录","stats"===n.name&&"统计分析"]},n.name))})})}function De({users:e,loading:s,onRefresh:a,onStatsRefresh:n}){const[i,o]=r.useState(""),l=[{title:"用户ID",dataIndex:"id",key:"id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"金币余额",dataIndex:"currency",key:"currency",width:120,render:e=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(K,{className:"text-yellow-400"}),t.jsx("span",{className:"font-bold text-yellow-400",children:e.toLocaleString()})]})},{title:"月卡状态",key:"monthCards",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(G,{className:"text-blue-400"}),t.jsx("span",{className:"text-sm",children:"小月卡:"}),t.jsx(ye,{count:s.small_month_card_days,showZero:!0,color:s.small_month_card_days>0?"blue":"default"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(g,{className:"text-purple-400"}),t.jsx("span",{className:"text-sm",children:"大月卡:"}),t.jsx(ye,{count:s.big_month_card_days,showZero:!0,color:s.big_month_card_days>0?"purple":"default"})]})]})},{title:"充值信息",key:"rechargeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"总充值:"}),t.jsxs("span",{className:"text-green-400 font-bold ml-1",children:["¥",s.total_recharge_amount]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"充值次数:"}),t.jsx("span",{className:"text-blue-400 font-bold ml-1",children:s.total_recharge_count})]}),s.is_first_recharge&&t.jsx(M,{color:"gold",icon:t.jsx(se,{}),children:"首充用户"})]})},{title:"时间信息",key:"timeInfo",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"最后充值:"}),t.jsx("div",{className:"text-slate-300",children:s.last_recharge_time?$e(s.last_recharge_time).format("YYYY-MM-DD HH:mm"):"无"})]}),s.first_recharge_time&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"首充时间:"}),t.jsx("div",{className:"text-slate-300",children:$e(s.first_recharge_time).format("YYYY-MM-DD HH:mm")})]})]})}],c=e.filter(e=>e.id.toLowerCase().includes(i.toLowerCase()));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(u.Search,{placeholder:"输入关键词搜索...",value:i,onChange:e=>o(e.target.value),onSearch:()=>{},size:"large",onKeyPress:e=>"Enter"===e.key&&o(e.target.value),className:"w-full xiuxian-input"})}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",c.length," 个用户"]})]}),t.jsx(y,{columns:l,dataSource:c,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:c.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}const{Option:Ee}=m;function Te({records:e,loading:s,config:a}){const[n,i]=r.useState(""),[o,l]=r.useState(""),[c,d]=r.useState(""),x=[{title:"记录ID",dataIndex:"id",key:"id",width:100,render:e=>t.jsx("div",{className:"font-mono text-xs bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"用户ID",dataIndex:"user_id",key:"user_id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"充值类型",dataIndex:"type",key:"type",width:120,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(M,{color:He(e),children:Be(e)}),s.tier&&t.jsx("div",{className:"text-xs text-slate-400",children:s.tier})]})},{title:"充值金额",dataIndex:"tier",key:"amount",width:120,render:(e,s)=>{const n=(e=>{var t,s,n,r,i;if(!a)return 0;if(e===(null==(s=null==(t=a.monthCardConfig)?void 0:t.SMALL)?void 0:s.name))return a.monthCardConfig.SMALL.price;if(e===(null==(r=null==(n=a.monthCardConfig)?void 0:n.BIG)?void 0:r.name))return a.monthCardConfig.BIG.price;const o=null==(i=a.rechargeTiers)?void 0:i.find(t=>t.name===e);return(null==o?void 0:o.amount)||0})(e);return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"font-bold text-green-400",children:["¥",n]}),s.currency_gained>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["获得金币: ",s.currency_gained.toLocaleString()]}),s.month_card_days>0&&t.jsxs("div",{className:"text-xs text-blue-400",children:["月卡天数: ",s.month_card_days,"天"]})]})}},{title:"支付状态",dataIndex:"payment_status",key:"payment_status",width:100,render:e=>t.jsx(M,{color:Re(e),children:Le(e)})},{title:"支付信息",key:"paymentInfo",width:150,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"方式:"}),t.jsx("span",{className:"text-slate-300 ml-1",children:s.payment_method})]}),s.transaction_id&&t.jsxs("div",{className:"font-mono text-slate-400",children:[s.transaction_id.slice(0,8),"..."]})]})},{title:"时间信息",key:"timeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"创建:"}),t.jsx("div",{className:"text-slate-300",children:$e(s.created_at).format("MM-DD HH:mm")})]}),s.paid_at&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"支付:"}),t.jsx("div",{className:"text-slate-300",children:$e(s.paid_at).format("MM-DD HH:mm")})]})]})},{title:"特殊标记",key:"special",width:100,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[s.is_first_recharge&&t.jsx(M,{color:"gold",icon:t.jsx(se,{}),children:"首充"}),s.first_recharge_bonus>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["奖励: +",s.first_recharge_bonus]})]})},{title:"操作",key:"actions",width:100,render:(e,s)=>t.jsx(I,{children:t.jsx(h,{size:"small",icon:t.jsx(z,{}),onClick:()=>{},children:"详情"})})}],g=e.filter(e=>{const t=e.user_id.toLowerCase().includes(n.toLowerCase())||e.id.toLowerCase().includes(n.toLowerCase()),s=!o||e.payment_status===o,a=!c||e.type===c;return t&&s&&a});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(u.Search,{placeholder:"搜索用户ID或记录ID",className:"w-full xiuxian-input",value:n,onChange:e=>i(e.target.value),onSearch:()=>{},onKeyPress:e=>"Enter"===e.key&&i(e.target.value)})}),t.jsxs(m,{placeholder:"支付状态",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:l,children:[t.jsx(Ee,{value:"pending",children:"待支付"}),t.jsx(Ee,{value:"success",children:"支付成功"}),t.jsx(Ee,{value:"failed",children:"支付失败"}),t.jsx(Ee,{value:"refunded",children:"已退款"})]}),t.jsxs(m,{placeholder:"充值类型",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:d,children:[t.jsx(Ee,{value:"currency",children:"金币充值"}),t.jsx(Ee,{value:"small_month_card",children:"小月卡"}),t.jsx(Ee,{value:"big_month_card",children:"大月卡"}),t.jsx(Ee,{value:"combo",children:"组合充值"})]}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",g.length," 条记录"]})]}),t.jsx(y,{columns:x,dataSource:g,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:g.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}function He(e){switch(e){case"currency":return"green";case"small_month_card":return"blue";case"big_month_card":return"purple";case"combo":return"orange";default:return"default"}}function Be(e){switch(e){case"currency":return"金币充值";case"small_month_card":return"小月卡";case"big_month_card":return"大月卡";case"combo":return"组合充值";default:return e}}function Re(e){switch(e){case"pending":return"orange";case"success":return"green";case"failed":return"red";case"refunded":return"gray";default:return"default"}}function Le(e){switch(e){case"pending":return"待支付";case"success":return"支付成功";case"failed":return"支付失败";case"refunded":return"已退款";default:return e}}function Pe({stats:e}){return e?t.jsxs("div",{className:"space-y-6",children:[t.jsxs(D,{gutter:16,children:[t.jsx(E,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(K,{className:"text-green-400"}),"充值金额统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值金额"}),t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["¥",e.total_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-blue-400",children:["¥",e.month_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值金额"}),t.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["¥",e.today_amount.toLocaleString()]})]})]})]})}),t.jsx(E,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Y,{className:"text-blue-400"}),"充值次数统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值次数"}),t.jsx("span",{className:"text-2xl font-bold text-blue-400",children:e.total_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值次数"}),t.jsx("span",{className:"text-xl font-bold text-purple-400",children:e.month_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值次数"}),t.jsx("span",{className:"text-lg font-bold text-cyan-400",children:e.today_count.toLocaleString()})]})]})]})})]}),t.jsxs(D,{gutter:16,children:[t.jsx(E,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(j,{className:"text-yellow-400"}),"用户统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"首充用户数"}),t.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:e.first_recharge_users.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"平均充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-green-400",children:["¥",e.total_count>0?(e.total_amount/e.total_count).toFixed(2):"0.00"]})]})]})]})}),t.jsx(E,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ie,{className:"text-purple-400"}),"系统信息"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"最后更新"}),t.jsx("span",{className:"text-sm text-slate-300",children:$e(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})]})})]})})]})]}):t.jsx("div",{children:"暂无数据"})}const{Option:Fe}=m;function We({visible:e,user:a,onCancel:n,onOk:r,form:o,config:l,users:c=[]}){var d;const[h,x]=s.useState("currency"),[f,p]=s.useState(""),[b,v]=s.useState(""),[j,y]=s.useState(null),[w,$]=s.useState(null),[N,S]=s.useState("select");s.useEffect(()=>{e&&(o.resetFields(),x("currency"),p((null==a?void 0:a.id)||""),$(a),v(""),y(null),S("select"))},[e,o,a]),s.useEffect(()=>{if(b&&(null==l?void 0:l.rechargeTiers)){const e=l.rechargeTiers.find(e=>e.name===b);e&&y(e)}else b&&(null==l?void 0:l.monthCardConfig)&&(b===l.monthCardConfig.SMALL.name?y(l.monthCardConfig.SMALL):b===l.monthCardConfig.BIG.name&&y(l.monthCardConfig.BIG))},[b,l]);const C=e=>{p(e);const t=c.find(t=>t.id===e);$(t||null),o.setFieldsValue({userId:e})},O=e=>{const t=e.target.value;p(t),$(null),o.setFieldsValue({userId:t})},k=()=>t.jsx(i.Item,{name:"userId",label:t.jsx("span",{className:"text-slate-300",children:"用户ID"}),rules:[{required:!0,message:"请输入或选择用户ID"}],children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Me,{value:N,onChange:e=>(S(e),p(""),$(null),void o.setFieldsValue({userId:void 0})),options:[{value:"select",label:"从列表选择"},{value:"manual",label:"手动输入"}],variant:"button",size:"small",className:"mb-3"}),"select"===N?t.jsx(m,{showSearch:!0,placeholder:"搜索并选择用户",value:f,onChange:C,filterOption:(e,t)=>{const s=null==t?void 0:t.children;return"string"==typeof s&&s.toLowerCase().includes(e.toLowerCase())},className:"xiuxian-select",dropdownRender:e=>t.jsxs("div",{children:[e,t.jsx(ke,{style:{margin:"8px 0"}}),t.jsxs("div",{className:"px-3 py-2 text-xs text-slate-400",children:["共 ",c.length," 个用户"]})]}),children:c.map(e=>t.jsx(Fe,{value:e.id,children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono text-sm",children:e.id}),e.is_first_recharge&&t.jsxs(M,{color:"gold",children:[t.jsx(g,{})," 首充"]})]}),t.jsxs("div",{className:"text-xs text-slate-400",children:["¥",e.currency," | ",e.total_recharge_count,"次"]})]})},e.id))}):t.jsx(u,{placeholder:"请输入用户ID",value:f,onChange:O,className:"xiuxian-input"})]})});return t.jsx(T,{title:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(K,{className:"text-purple-400"}),t.jsx("span",{className:"text-white",children:"用户充值"})]}),open:e,onCancel:n,onOk:()=>o.submit(),width:700,className:"xiuxian-modal",children:t.jsxs(i,{form:o,layout:"vertical",onFinish:r,children:[t.jsx(k,{}),w&&t.jsx(H,{className:"mb-4 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-blue-500/20",size:"small",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["用户ID:"," ",t.jsx("span",{className:"text-white font-mono",children:w.id})]}),t.jsxs("div",{children:["金币余额:"," ",t.jsx("span",{className:"text-yellow-400",children:w.currency.toLocaleString()})]}),t.jsxs("div",{children:["总充值:"," ",t.jsxs("span",{className:"text-green-400",children:["¥",w.total_recharge_amount]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["充值次数:"," ",t.jsx("span",{className:"text-blue-400",children:w.total_recharge_count})]}),t.jsxs("div",{children:["小月卡:"," ",t.jsxs("span",{className:"text-blue-400",children:[w.small_month_card_days,"天"]})]}),t.jsxs("div",{children:["大月卡:"," ",t.jsxs("span",{className:"text-purple-400",children:[w.big_month_card_days,"天"]})]})]})]})}),t.jsx(i.Item,{name:"type",label:t.jsx("span",{className:"text-slate-300",children:"充值类型"}),rules:[{required:!0,message:"请选择充值类型"}],children:t.jsxs(m,{onChange:e=>{x(e),v(""),y(null),o.setFieldsValue({tier:void 0})},className:"xiuxian-select",children:[t.jsx(Fe,{value:"recharge-currency",children:"金币充值"}),t.jsx(Fe,{value:"recharge-small-month-card",children:"小月卡"}),t.jsx(Fe,{value:"recharge-big-month-card",children:"大月卡"})]})}),"recharge-currency"===h&&t.jsx(i.Item,{name:"tier",label:t.jsx("span",{className:"text-slate-300",children:"充值档位"}),rules:[{required:!0,message:"请选择充值档位"}],children:t.jsx(m,{onChange:e=>{v(e),o.setFieldsValue({tier:e})},className:"xiuxian-select",placeholder:"请选择充值档位",children:null==(d=null==l?void 0:l.rechargeTiers)?void 0:d.map(e=>t.jsxs(Fe,{value:e.name,children:[e.name," (¥",e.amount,")"]},e.key))})}),j&&t.jsx(H,{className:"mb-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",size:"small",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"text-white font-semibold mb-2",children:j.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["价格:"," ",t.jsxs("span",{className:"text-yellow-400",children:["¥",j.amount||j.price]})]}),j.currencyGained&&t.jsxs("div",{children:["获得金币:"," ",t.jsx("span",{className:"text-green-400",children:j.currencyGained})]}),j.days&&t.jsxs("div",{children:["月卡天数:"," ",t.jsxs("span",{className:"text-blue-400",children:[j.days,"天"]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[j.firstRechargeBonus&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(se,{className:"text-pink-400"}),"首充奖励:"," ",t.jsxs("span",{className:"text-pink-400",children:[j.firstRechargeBonus,"金币"]})]}),(null==w?void 0:w.is_first_recharge)&&t.jsxs(M,{color:"gold",className:"mt-1",children:[t.jsx(g,{})," 首充用户"]})]})]})]})}),t.jsx(i.Item,{name:"remark",label:t.jsx("span",{className:"text-slate-300",children:"备注"}),children:t.jsx(u.TextArea,{rows:3,placeholder:"可选备注信息",className:"xiuxian-input"})})]})})}function Ve(){const{loading:e,users:a,records:n,stats:r,config:i,selectedTab:o,rechargeModalVisible:l,selectedUser:c,rechargeForm:d,setSelectedTab:u,setRechargeModalVisible:m,setSelectedUser:h,fetchUsers:x,fetchRecords:g,fetchStats:f,fetchConfig:p,handleRechargeOk:b}=_e();s.useEffect(()=>{x(),f()},[]);return t.jsxs(R,{children:[t.jsx(L,{icon:t.jsx(K,{}),title:"货币管理系统",subtitle:"管理用户金币、月卡和充值记录",actions:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"px-2 py-1 rounded-md bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",onClick:()=>{h(null),m(!0)},children:[t.jsx(B,{}),"充值"]}),t.jsx(P,{loading:e,onClick:()=>{x(),g(),f(),p()}})]})}),r&&t.jsx(Ie,{stats:r}),t.jsx(ze,{selectedTab:o,onTabChange:u,onRecordsTabClick:()=>{u("records"),g()}}),t.jsxs(v,{title:("users"===o?"用户货币管理":"records"===o&&"充值记录管理")||"stats"===o&&"统计分析"||"货币管理",icon:t.jsx(K,{}),children:["users"===o&&t.jsx(De,{users:a,loading:e,onRefresh:x,onStatsRefresh:f}),"records"===o&&t.jsx(Te,{records:n,loading:e,config:i}),"stats"===o&&t.jsx(Pe,{stats:r})]}),t.jsx(We,{visible:l,user:c,config:i,users:a,onCancel:()=>{m(!1),h(null),d.resetFields()},onOk:b,form:d})]})}export{Ve as default};
