import{a as e,j as t}from"./index-CZe7n4Lj.js";import{r as s,b as a}from"./react-vendor-DC8kK7ng.js";import{F as n}from"./index-Dz9nlkEI.js";import{s as r}from"./index-B2pL6Oo6.js";import{c as l}from"./index-DXDPliM2.js";import{C as o,u as i,I as c,S as d,B as m}from"./XiuxianUserSelector-DG9qzst9.js";import{X as u}from"./XiuxianStatCard-DpY0hqOF.js";import{I as h,g as x,i as g,X as p}from"./XiuxianTableContainer-BrJeXT0C.js";import{R as b}from"./UserOutlined-83N7OiF5.js";import{d as f}from"./dayjs.min-Xkjmg--Y.js";import{X as j}from"./XiuxianTableWithPagination-iDbrxln5.js";import{g as v,m as y,r as N,K as w,u as $,C as S,c as C,a as O}from"./reactNode-pxslT-9z.js";import{R as k}from"./CrownOutlined-C5T6qUCq.js";import{T as _}from"./index-BfhbG92g.js";import{S as z}from"./Table-CmQFIGqV.js";import{R as I}from"./EyeOutlined-BpDRA3ZQ.js";import{R as E,C as M}from"./row-B6aAx17Z.js";import{M as T}from"./index-DIi_BEjK.js";import{C as R}from"./index-4wMZLXQI.js";import{X as B,a as H}from"./XiuxianPageTitle-p-rFU0Cf.js";import{X as D}from"./XiuxianRefreshButton-Ssc2YR6P.js";import{R as P}from"./PlusOutlined-C1laHx0c.js";import"./extendsObject-7EMpNKCT.js";import"./context-DvSbzuJ7.js";import"./index-BbllsrZX.js";import"./index-CUUyKPWT.js";import"./index-Dj1WZ8aH.js";import"./PlusOutlined-ByZyTB3m.js";var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},F.apply(this,arguments)}const V=(e,t)=>s.createElement(h,F({},e,{ref:t,icon:L})),W=s.forwardRef(V);var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},A.apply(this,arguments)}const G=(e,t)=>s.createElement(h,A({},e,{ref:t,icon:X})),Y=s.forwardRef(G);var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},q.apply(this,arguments)}const U=(e,t)=>s.createElement(h,q({},e,{ref:t,icon:Z})),K=s.forwardRef(U);var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Q.apply(this,arguments)}const ee=(e,t)=>s.createElement(h,Q({},e,{ref:t,icon:J})),te=s.forwardRef(ee);var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ae.apply(this,arguments)}const ne=(e,t)=>s.createElement(h,ae({},e,{ref:t,icon:se})),re=s.forwardRef(ne),le=new w("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),oe=new w("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),ie=new w("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),ce=new w("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),de=new w("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),me=new w("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),ue=e=>{const{fontHeight:t,lineWidth:s,marginXS:a,colorBorderBg:n}=e,r=t,l=s,o=e.colorTextLightSolid,i=e.colorError,c=e.colorErrorHover;return y(e,{badgeFontHeight:r,badgeShadowSize:l,badgeTextColor:o,badgeColor:i,badgeColorHover:c,badgeShadowColor:n,badgeProcessingDuration:"1.2s",badgeRibbonOffset:a,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},he=e=>{const{fontSize:t,lineHeight:s,fontSizeSM:a,lineWidth:n}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*s)-2*n,indicatorHeightSM:t,dotSize:a/2,textFontSize:a,textFontSizeSM:a,textFontWeight:"normal",statusSize:a/2}},xe=v("Badge",e=>(e=>{const{componentCls:t,iconCls:s,antCls:a,badgeShadowSize:n,textFontSize:r,textFontSizeSM:l,statusSize:o,dotSize:i,textFontWeight:c,indicatorHeight:d,indicatorHeightSM:m,marginXS:u,calc:h}=e,g=`${a}-scroll-number`,p=x(e,(e,{darkColor:s})=>({[`&${t} ${t}-color-${e}`]:{background:s,[`&:not(${t}-count)`]:{color:s},"a:hover &":{background:s}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:d,height:d,color:e.badgeTextColor,fontWeight:c,fontSize:r,lineHeight:$(d),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:h(d).div(2).equal(),boxShadow:`0 0 0 ${$(n)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:m,height:m,fontSize:l,lineHeight:$(m),borderRadius:h(m).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${$(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:i,minWidth:i,height:i,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${$(n)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${g}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${s}-spin`]:{animationName:me,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:o,height:o,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:n,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:le,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:u,color:e.colorText,fontSize:e.fontSize}}}),p),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:oe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:ie,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:ce,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:de,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${g}-custom-component, ${t}-count`]:{transform:"none"},[`${g}-custom-component, ${g}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[g]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${g}-only`]:{position:"relative",display:"inline-block",height:d,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${g}-only-unit`]:{height:d,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${g}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${g}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}})(ue(e)),he),ge=v(["Badge","Ribbon"],e=>(e=>{const{antCls:t,badgeFontHeight:s,marginXS:a,badgeRibbonOffset:n,calc:r}=e,l=`${t}-ribbon`,o=`${t}-ribbon-wrapper`,i=x(e,(e,{darkColor:t})=>({[`&${l}-color-${e}`]:{background:t,color:t}}));return{[o]:{position:"relative"},[l]:Object.assign(Object.assign(Object.assign(Object.assign({},N(e)),{position:"absolute",top:a,padding:`0 ${$(e.paddingXS)}`,color:e.colorPrimary,lineHeight:$(s),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${l}-text`]:{color:e.badgeTextColor},[`${l}-corner`]:{position:"absolute",top:"100%",width:n,height:n,color:"currentcolor",border:`${$(r(n).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),i),{[`&${l}-placement-end`]:{insetInlineEnd:r(n).mul(-1).equal(),borderEndEndRadius:0,[`${l}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${l}-placement-start`]:{insetInlineStart:r(n).mul(-1).equal(),borderEndStartRadius:0,[`${l}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}})(ue(e)),he),pe=e=>{const{prefixCls:t,value:a,current:n,offset:r=0}=e;let o;return r&&(o={position:"absolute",top:`${r}00%`,left:0}),s.createElement("span",{style:o,className:l(`${t}-only-unit`,{current:n})},a)};function be(e,t,s){let a=e,n=0;for(;(a+10)%10!==t;)a+=s,n+=s;return n}const fe=e=>{const{prefixCls:t,count:a,value:n}=e,r=Number(n),l=Math.abs(a),[o,i]=s.useState(r),[c,d]=s.useState(l),m=()=>{i(r),d(l)};let u,h;if(s.useEffect(()=>{const e=setTimeout(m,1e3);return()=>clearTimeout(e)},[r]),o===r||Number.isNaN(r)||Number.isNaN(o))u=[s.createElement(pe,Object.assign({},e,{key:r,current:!0}))],h={transition:"none"};else{u=[];const t=r+10,a=[];for(let e=r;e<=t;e+=1)a.push(e);const n=c<l?1:-1,i=a.findIndex(e=>e%10===o);u=(n<0?a.slice(0,i+1):a.slice(i)).map((t,a)=>{const r=t%10;return s.createElement(pe,Object.assign({},e,{key:t,value:r,offset:n<0?a-i:a,current:a===i}))}),h={transform:`translateY(${-be(o,r,n)}00%)`}}return s.createElement("span",{className:`${t}-only`,style:h,onTransitionEnd:m},u)};const je=s.forwardRef((e,t)=>{const{prefixCls:a,count:n,className:r,motionClassName:o,style:i,title:c,show:d,component:m="sup",children:u}=e,h=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:x}=s.useContext(S),g=x("scroll-number",a),p=Object.assign(Object.assign({},h),{"data-show":d,style:i,className:l(g,r,o),title:c});let b=n;if(n&&Number(n)%1==0){const e=String(n).split("");b=s.createElement("bdi",null,e.map((t,a)=>s.createElement(fe,{prefixCls:g,count:Number(n),value:t,key:e.length-a})))}return(null==i?void 0:i.borderColor)&&(p.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),u?C(u,e=>({className:l(`${g}-custom-component`,null==e?void 0:e.className,o)})):s.createElement(m,Object.assign({},p,{ref:t}),b)});const ve=s.forwardRef((e,t)=>{var a,n,r,i,c;const{prefixCls:d,scrollNumberPrefixCls:m,children:u,status:h,text:x,color:p,count:b=null,overflowCount:f=99,dot:j=!1,size:v="default",title:y,offset:N,style:w,className:$,rootClassName:O,classNames:k,styles:_,showZero:z=!1}=e,I=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:E,direction:M,badge:T}=s.useContext(S),R=E("badge",d),[B,H,D]=xe(R),P=b>f?`${f}+`:b,L="0"===P||0===P||"0"===x||0===x,F=null===b||L&&!z,V=(null!=h||null!=p)&&F,W=null!=h||!L,X=j&&!L,A=X?"":P,G=s.useMemo(()=>(!(null!=A&&""!==A||null!=x&&""!==x)||L&&!z)&&!X,[A,L,z,X,x]),Y=s.useRef(b);G||(Y.current=b);const Z=Y.current,q=s.useRef(A);G||(q.current=A);const U=q.current,K=s.useRef(X);G||(K.current=X);const J=s.useMemo(()=>{if(!N)return Object.assign(Object.assign({},null==T?void 0:T.style),w);const e={marginTop:N[1]};return"rtl"===M?e.left=parseInt(N[0],10):e.right=-parseInt(N[0],10),Object.assign(Object.assign(Object.assign({},e),null==T?void 0:T.style),w)},[M,N,w,null==T?void 0:T.style]),Q=null!=y?y:"string"==typeof Z||"number"==typeof Z?Z:void 0,ee=!G&&(0===x?z:!!x&&!0!==x),te=ee?s.createElement("span",{className:`${R}-status-text`},x):null,se=Z&&"object"==typeof Z?C(Z,e=>({style:Object.assign(Object.assign({},J),e.style)})):void 0,ae=g(p,!1),ne=l(null==k?void 0:k.indicator,null===(a=null==T?void 0:T.classNames)||void 0===a?void 0:a.indicator,{[`${R}-status-dot`]:V,[`${R}-status-${h}`]:!!h,[`${R}-color-${p}`]:ae}),re={};p&&!ae&&(re.color=p,re.background=p);const le=l(R,{[`${R}-status`]:V,[`${R}-not-a-wrapper`]:!u,[`${R}-rtl`]:"rtl"===M},$,O,null==T?void 0:T.className,null===(n=null==T?void 0:T.classNames)||void 0===n?void 0:n.root,null==k?void 0:k.root,H,D);if(!u&&V&&(x||W||!F)){const e=J.color;return B(s.createElement("span",Object.assign({},I,{className:le,style:Object.assign(Object.assign(Object.assign({},null==_?void 0:_.root),null===(r=null==T?void 0:T.styles)||void 0===r?void 0:r.root),J)}),s.createElement("span",{className:ne,style:Object.assign(Object.assign(Object.assign({},null==_?void 0:_.indicator),null===(i=null==T?void 0:T.styles)||void 0===i?void 0:i.indicator),re)}),ee&&s.createElement("span",{style:{color:e},className:`${R}-status-text`},x)))}return B(s.createElement("span",Object.assign({ref:t},I,{className:le,style:Object.assign(Object.assign({},null===(c=null==T?void 0:T.styles)||void 0===c?void 0:c.root),null==_?void 0:_.root)}),u,s.createElement(o,{visible:!G,motionName:`${R}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:e})=>{var t,a;const n=E("scroll-number",m),r=K.current,o=l(null==k?void 0:k.indicator,null===(t=null==T?void 0:T.classNames)||void 0===t?void 0:t.indicator,{[`${R}-dot`]:r,[`${R}-count`]:!r,[`${R}-count-sm`]:"small"===v,[`${R}-multiple-words`]:!r&&U&&U.toString().length>1,[`${R}-status-${h}`]:!!h,[`${R}-color-${p}`]:ae});let i=Object.assign(Object.assign(Object.assign({},null==_?void 0:_.indicator),null===(a=null==T?void 0:T.styles)||void 0===a?void 0:a.indicator),J);return p&&!ae&&(i=i||{},i.background=p),s.createElement(je,{prefixCls:n,show:!G,motionClassName:e,className:o,count:U,title:Q,style:i,key:"scrollNumber"},se)}),te))});ve.Ribbon=e=>{const{className:t,prefixCls:a,style:n,color:r,children:o,text:i,placement:c="end",rootClassName:d}=e,{getPrefixCls:m,direction:u}=s.useContext(S),h=m("ribbon",a),x=`${h}-wrapper`,[p,b,f]=ge(h,x),j=g(r,!1),v=l(h,`${h}-placement-${c}`,{[`${h}-rtl`]:"rtl"===u,[`${h}-color-${r}`]:j},t),y={},N={};return r&&!j&&(y.background=r,N.color=r),p(s.createElement("div",{className:l(x,d,b,f)},o,s.createElement("div",{className:l(v,b),style:Object.assign(Object.assign({},y),n)},s.createElement("span",{className:`${h}-text`},i),s.createElement("div",{className:`${h}-corner`,style:N}))))};const ye=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{[`&${t}`]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},Ne=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:s,colorSplit:a,lineWidth:n,textPaddingInline:r,orientationMargin:l,verticalMarginInline:o}=e;return{[t]:Object.assign(Object.assign({},N(e)),{borderBlockStart:`${$(n)} solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${$(n)} solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${$(e.marginLG)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${$(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${$(n)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${l} * 100%)`},"&::after":{width:`calc(100% - ${l} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${l} * 100%)`},"&::after":{width:`calc(${l} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:r},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${$(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:`${$(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:s}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:s}}})}},we=v("Divider",e=>{const t=y(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[Ne(t),ye(t)]},e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}});const $e={small:"sm",middle:"md"},Se=e=>{const{getPrefixCls:t,direction:a,className:n,style:r}=O("divider"),{prefixCls:o,type:c="horizontal",orientation:d="center",orientationMargin:m,className:u,rootClassName:h,children:x,dashed:g,variant:p="solid",plain:b,style:f,size:j}=e,v=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),y=t("divider",o),[N,w,$]=we(y),S=i(j),C=$e[S],k=!!x,_=s.useMemo(()=>"left"===d?"rtl"===a?"end":"start":"right"===d?"rtl"===a?"start":"end":d,[a,d]),z="start"===_&&null!=m,I="end"===_&&null!=m,E=l(y,n,w,$,`${y}-${c}`,{[`${y}-with-text`]:k,[`${y}-with-text-${_}`]:k,[`${y}-dashed`]:!!g,[`${y}-${p}`]:"solid"!==p,[`${y}-plain`]:!!b,[`${y}-rtl`]:"rtl"===a,[`${y}-no-default-orientation-margin-start`]:z,[`${y}-no-default-orientation-margin-end`]:I,[`${y}-${C}`]:!!C},u,h),M=s.useMemo(()=>"number"==typeof m?m:/^\d+$/.test(m)?Number(m):m,[m]),T={marginInlineStart:z?M:void 0,marginInlineEnd:I?M:void 0};return N(s.createElement("div",Object.assign({className:E,style:Object.assign(Object.assign({},r),f)},v,{role:"separator"}),x&&"vertical"!==c&&s.createElement("span",{className:`${y}-inner-text`,style:T},x)))},Ce=()=>{const[t,s]=a.useState(!1),[l,o]=a.useState([]),[i,c]=a.useState([]),[d,m]=a.useState(null),[u,h]=a.useState(null),[x,g]=a.useState("users"),[p,b]=a.useState(!1),[f,j]=a.useState(null),[v]=n.useForm(),y=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/config",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取配置信息失败"}}catch(t){return{success:!1,message:"获取配置信息失败"}}})();t.success&&t.data?h(t.data):r.error(t.message||"获取配置信息失败")},N=async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/users",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取用户数据失败"}}catch(t){return{success:!1,message:"获取用户数据失败"}}})();t.success&&t.data?o(t.data):r.error(t.message||"获取用户数据失败")}catch(t){r.error("获取用户数据失败")}s(!1)},w=async()=>{const t=await(async()=>{try{const t=await e({url:"/currency/stats",method:"GET"});return 200===t.code?{success:!0,data:t.data}:{success:!1,message:t.message||"获取统计数据失败"}}catch(t){return{success:!1,message:"获取统计数据失败"}}})();t.success&&t.data?m(t.data):r.error(t.message||"获取统计数据失败")};return a.useEffect(()=>{(async()=>{try{await Promise.all([y(),N(),w()])}catch(e){}})()},[]),{loading:t,users:l,records:i,stats:d,config:u,selectedTab:x,rechargeModalVisible:p,selectedUser:f,rechargeForm:v,setSelectedTab:g,setRechargeModalVisible:b,setSelectedUser:j,fetchUsers:N,fetchRecords:async()=>{s(!0);try{const t=await(async()=>{try{const t=await e({url:"/currency/records",method:"GET"});return 200===t.code?{success:!0,data:t.data.records}:{success:!1,message:t.message||"获取充值记录失败"}}catch(t){return{success:!1,message:"获取充值记录失败"}}})();t.success&&t.data?c(t.data):r.error(t.message||"获取充值记录失败")}catch(t){r.error("获取充值记录失败")}s(!1)},fetchStats:w,fetchConfig:y,handleRechargeOk:async t=>{try{const s=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:t});return 201===s.code?{success:!0,data:s.data}:{success:!1,message:s.message||"创建充值记录失败"}}catch(s){return{success:!1,message:"创建充值记录失败"}}})({action:t.type,userId:t.userId,tier:t.tier,paymentMethod:"admin",remark:t.remark});if(s.success&&s.data){const t=await(async t=>{try{const s=await e({url:"/currency/recharge",method:"POST",data:{action:"complete-payment",...t}});return 200===s.code?{success:!0}:{success:!1,message:s.message||"支付完成失败"}}catch(s){return{success:!1,message:"支付完成失败"}}})({recordId:s.data.id,transactionId:"ADMIN_"+Date.now(),paymentMethod:"admin"});t.success?(r.success("充值成功"),b(!1),j(null),v.resetFields(),N(),w()):r.error(t.message||"支付完成失败")}else r.error(s.message||"创建充值记录失败")}catch(s){r.error("充值操作失败，请重试")}}}},Oe=({value:e,onChange:s,options:a,className:n="",size:r="default",variant:l="button"})=>{const o={small:"px-3 py-1.5 text-sm",default:"px-4 py-2 text-base",large:"px-6 py-3 text-lg"},i=e=>{var t;s&&!(null==(t=a.find(t=>t.value===e))?void 0:t.disabled)&&s(e)};return"button"===l?t.jsx("div",{className:`flex gap-2 ${n}`,children:a.map(s=>{const a=e===s.value,n=s.disabled;return t.jsx("button",{type:"button",disabled:n,onClick:()=>i(s.value),className:`\n                ${o[r]}\n                rounded-lg font-medium transition-all duration-200\n                ${a?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":n?"bg-slate-800/30 text-slate-500 border border-slate-700 cursor-not-allowed":"bg-slate-700/50 text-slate-300 border border-slate-600 hover:bg-slate-600/50 hover:text-white hover:border-slate-500"}\n                focus:outline-none focus:ring-2 focus:ring-purple-500/50\n              `,children:s.label},s.value)})}):t.jsx("div",{className:`space-y-2 ${n}`,children:a.map(s=>{const a=e===s.value,n=s.disabled;return t.jsxs("label",{className:`\n              flex items-center gap-3 cursor-pointer transition-all duration-200\n              ${n?"cursor-not-allowed opacity-50":"hover:text-white"}\n            `,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",value:s.value,checked:a,disabled:n,onChange:()=>i(s.value),className:"sr-only"}),t.jsx("div",{className:`\n                  w-4 h-4 border-2 rounded-full flex items-center justify-center\n                  transition-all duration-200\n                  ${a?"border-purple-500 bg-purple-500":n?"border-slate-600 bg-slate-800":"border-slate-500 bg-slate-700 hover:border-slate-400"}\n                `,children:a&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsx("span",{className:"text-sm "+(a?"text-white":"text-slate-300"),children:s.label})]},s.value)})})};function ke({stats:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[t.jsx(u,{title:"总充值金额",value:`¥${e.total_amount.toLocaleString()}`,icon:t.jsx(W,{}),gradient:"green"}),t.jsx(u,{title:"总充值次数",value:e.total_count.toLocaleString(),icon:t.jsx(W,{}),gradient:"blue"}),t.jsx(u,{title:"首充用户数",value:e.first_recharge_users.toLocaleString(),icon:t.jsx(W,{}),gradient:"purple"}),t.jsx(u,{title:"今日充值",value:`¥${e.today_amount.toLocaleString()}`,icon:t.jsx(W,{}),gradient:"orange"})]})}function _e({selectedTab:e,onTabChange:s,onRecordsTabClick:a}){const n=[{name:"users",icon:t.jsx(b,{}),content:null},{name:"records",icon:t.jsx(re,{}),content:null},{name:"stats",icon:t.jsx(W,{}),content:null}];return t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex gap-4",children:n.map(n=>t.jsxs("button",{className:"px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 "+(e===n.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 border border-slate-600"),onClick:()=>{var e;"records"===(e=n.name)?a():s(e)},children:[n.icon,"users"===n.name&&"用户货币","records"===n.name&&"充值记录","stats"===n.name&&"统计分析"]},n.name))})})}function ze({users:e,loading:s,onRefresh:n,onStatsRefresh:r}){const[l,o]=a.useState(""),i=[{title:"用户ID",dataIndex:"id",key:"id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"金币余额",dataIndex:"currency",key:"currency",width:120,render:e=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(K,{className:"text-yellow-400"}),t.jsx("span",{className:"font-bold text-yellow-400",children:e.toLocaleString()})]})},{title:"月卡状态",key:"monthCards",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"text-blue-400"}),t.jsx("span",{className:"text-sm",children:"小月卡:"}),t.jsx(ve,{count:s.small_month_card_days,showZero:!0,color:s.small_month_card_days>0?"blue":"default"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(k,{className:"text-purple-400"}),t.jsx("span",{className:"text-sm",children:"大月卡:"}),t.jsx(ve,{count:s.big_month_card_days,showZero:!0,color:s.big_month_card_days>0?"purple":"default"})]})]})},{title:"充值信息",key:"rechargeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"总充值:"}),t.jsxs("span",{className:"text-green-400 font-bold ml-1",children:["¥",s.total_recharge_amount]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"充值次数:"}),t.jsx("span",{className:"text-blue-400 font-bold ml-1",children:s.total_recharge_count})]}),s.is_first_recharge&&t.jsx(_,{color:"gold",icon:t.jsx(te,{}),children:"首充用户"})]})},{title:"时间信息",key:"timeInfo",width:200,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"最后充值:"}),t.jsx("div",{className:"text-slate-300",children:s.last_recharge_time?f(s.last_recharge_time).format("YYYY-MM-DD HH:mm"):"无"})]}),s.first_recharge_time&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"首充时间:"}),t.jsx("div",{className:"text-slate-300",children:f(s.first_recharge_time).format("YYYY-MM-DD HH:mm")})]})]})}],d=e.filter(e=>e.id.toLowerCase().includes(l.toLowerCase()));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(c.Search,{placeholder:"输入关键词搜索...",value:l,onChange:e=>o(e.target.value),onSearch:()=>{},size:"large",onKeyPress:e=>"Enter"===e.key&&o(e.target.value),className:"w-full xiuxian-input"})}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",d.length," 个用户"]})]}),t.jsx(j,{columns:i,dataSource:d,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:d.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}const{Option:Ie}=d;function Ee({records:e,loading:s,config:n}){const[r,l]=a.useState(""),[o,i]=a.useState(""),[u,h]=a.useState(""),x=[{title:"记录ID",dataIndex:"id",key:"id",width:100,render:e=>t.jsx("div",{className:"font-mono text-xs bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"用户ID",dataIndex:"user_id",key:"user_id",width:120,render:e=>t.jsx("div",{className:"font-mono text-sm bg-slate-700/50 px-2 py-1 rounded",children:e})},{title:"充值类型",dataIndex:"type",key:"type",width:120,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(_,{color:Me(e),children:Te(e)}),s.tier&&t.jsx("div",{className:"text-xs text-slate-400",children:s.tier})]})},{title:"充值金额",dataIndex:"tier",key:"amount",width:120,render:(e,s)=>{const a=(e=>{var t,s,a,r,l;if(!n)return 0;if(e===(null==(s=null==(t=n.monthCardConfig)?void 0:t.SMALL)?void 0:s.name))return n.monthCardConfig.SMALL.price;if(e===(null==(r=null==(a=n.monthCardConfig)?void 0:a.BIG)?void 0:r.name))return n.monthCardConfig.BIG.price;const o=null==(l=n.rechargeTiers)?void 0:l.find(t=>t.name===e);return(null==o?void 0:o.amount)||0})(e);return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"font-bold text-green-400",children:["¥",a]}),s.currency_gained>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["获得金币: ",s.currency_gained.toLocaleString()]}),s.month_card_days>0&&t.jsxs("div",{className:"text-xs text-blue-400",children:["月卡天数: ",s.month_card_days,"天"]})]})}},{title:"支付状态",dataIndex:"payment_status",key:"payment_status",width:100,render:e=>t.jsx(_,{color:Re(e),children:Be(e)})},{title:"支付信息",key:"paymentInfo",width:150,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"方式:"}),t.jsx("span",{className:"text-slate-300 ml-1",children:s.payment_method})]}),s.transaction_id&&t.jsxs("div",{className:"font-mono text-slate-400",children:[s.transaction_id.slice(0,8),"..."]})]})},{title:"时间信息",key:"timeInfo",width:180,render:(e,s)=>t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"创建:"}),t.jsx("div",{className:"text-slate-300",children:f(s.created_at).format("MM-DD HH:mm")})]}),s.paid_at&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:"支付:"}),t.jsx("div",{className:"text-slate-300",children:f(s.paid_at).format("MM-DD HH:mm")})]})]})},{title:"特殊标记",key:"special",width:100,render:(e,s)=>t.jsxs("div",{className:"space-y-1",children:[s.is_first_recharge&&t.jsx(_,{color:"gold",icon:t.jsx(te,{}),children:"首充"}),s.first_recharge_bonus>0&&t.jsxs("div",{className:"text-xs text-yellow-400",children:["奖励: +",s.first_recharge_bonus]})]})},{title:"操作",key:"actions",width:100,render:(e,s)=>t.jsx(z,{children:t.jsx(m,{size:"small",icon:t.jsx(I,{}),onClick:()=>{},children:"详情"})})}],g=e.filter(e=>{const t=e.user_id.toLowerCase().includes(r.toLowerCase())||e.id.toLowerCase().includes(r.toLowerCase()),s=!o||e.payment_status===o,a=!u||e.type===u;return t&&s&&a});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(c.Search,{placeholder:"搜索用户ID或记录ID",className:"w-full xiuxian-input",value:r,onChange:e=>l(e.target.value),onSearch:()=>{},onKeyPress:e=>"Enter"===e.key&&l(e.target.value)})}),t.jsxs(d,{placeholder:"支付状态",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:i,children:[t.jsx(Ie,{value:"pending",children:"待支付"}),t.jsx(Ie,{value:"success",children:"支付成功"}),t.jsx(Ie,{value:"failed",children:"支付失败"}),t.jsx(Ie,{value:"refunded",children:"已退款"})]}),t.jsxs(d,{placeholder:"充值类型",allowClear:!0,className:"xiuxian-select",style:{width:120},onChange:h,children:[t.jsx(Ie,{value:"currency",children:"金币充值"}),t.jsx(Ie,{value:"small_month_card",children:"小月卡"}),t.jsx(Ie,{value:"big_month_card",children:"大月卡"}),t.jsx(Ie,{value:"combo",children:"组合充值"})]}),t.jsxs("div",{className:"text-slate-400 text-sm",children:["共 ",g.length," 条记录"]})]}),t.jsx(j,{columns:x,dataSource:g,loading:s,rowKey:"id",pagination:{current:1,pageSize:20,total:g.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})]})}function Me(e){switch(e){case"currency":return"green";case"small_month_card":return"blue";case"big_month_card":return"purple";case"combo":return"orange";default:return"default"}}function Te(e){switch(e){case"currency":return"金币充值";case"small_month_card":return"小月卡";case"big_month_card":return"大月卡";case"combo":return"组合充值";default:return e}}function Re(e){switch(e){case"pending":return"orange";case"success":return"green";case"failed":return"red";case"refunded":return"gray";default:return"default"}}function Be(e){switch(e){case"pending":return"待支付";case"success":return"支付成功";case"failed":return"支付失败";case"refunded":return"已退款";default:return e}}function He({stats:e}){return e?t.jsxs("div",{className:"space-y-6",children:[t.jsxs(E,{gutter:16,children:[t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(K,{className:"text-green-400"}),"充值金额统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值金额"}),t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["¥",e.total_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-blue-400",children:["¥",e.month_amount.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值金额"}),t.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["¥",e.today_amount.toLocaleString()]})]})]})]})}),t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(W,{className:"text-blue-400"}),"充值次数统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"总充值次数"}),t.jsx("span",{className:"text-2xl font-bold text-blue-400",children:e.total_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"本月充值次数"}),t.jsx("span",{className:"text-xl font-bold text-purple-400",children:e.month_count.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"今日充值次数"}),t.jsx("span",{className:"text-lg font-bold text-cyan-400",children:e.today_count.toLocaleString()})]})]})]})})]}),t.jsxs(E,{gutter:16,children:[t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(b,{className:"text-yellow-400"}),"用户统计"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"首充用户数"}),t.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:e.first_recharge_users.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"平均充值金额"}),t.jsxs("span",{className:"text-xl font-bold text-green-400",children:["¥",e.total_count>0?(e.total_amount/e.total_count).toFixed(2):"0.00"]})]})]})]})}),t.jsx(M,{span:12,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[t.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(re,{className:"text-purple-400"}),"系统信息"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-400",children:"最后更新"}),t.jsx("span",{className:"text-sm text-slate-300",children:f(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})]})})]})})]})]}):t.jsx("div",{children:"暂无数据"})}const{Option:De}=d;function Pe({visible:e,user:a,onCancel:r,onOk:l,form:o,config:i,users:m=[]}){var u;const[h,x]=s.useState("currency"),[g,p]=s.useState(""),[b,f]=s.useState(""),[j,v]=s.useState(null),[y,N]=s.useState(null),[w,$]=s.useState("select");s.useEffect(()=>{e&&(o.resetFields(),x("currency"),p((null==a?void 0:a.id)||""),N(a),f(""),v(null),$("select"))},[e,o,a]),s.useEffect(()=>{if(b&&(null==i?void 0:i.rechargeTiers)){const e=i.rechargeTiers.find(e=>e.name===b);e&&v(e)}else b&&(null==i?void 0:i.monthCardConfig)&&(b===i.monthCardConfig.SMALL.name?v(i.monthCardConfig.SMALL):b===i.monthCardConfig.BIG.name&&v(i.monthCardConfig.BIG))},[b,i]);const S=e=>{p(e);const t=m.find(t=>t.id===e);N(t||null),o.setFieldsValue({userId:e})},C=e=>{const t=e.target.value;p(t),N(null),o.setFieldsValue({userId:t})},O=()=>t.jsx(n.Item,{name:"userId",label:t.jsx("span",{className:"text-slate-300",children:"用户ID"}),rules:[{required:!0,message:"请输入或选择用户ID"}],children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Oe,{value:w,onChange:e=>($(e),p(""),N(null),void o.setFieldsValue({userId:void 0})),options:[{value:"select",label:"从列表选择"},{value:"manual",label:"手动输入"}],variant:"button",size:"small",className:"mb-3"}),"select"===w?t.jsx(d,{showSearch:!0,placeholder:"搜索并选择用户",value:g,onChange:S,filterOption:(e,t)=>{const s=null==t?void 0:t.children;return"string"==typeof s&&s.toLowerCase().includes(e.toLowerCase())},className:"xiuxian-select",dropdownRender:e=>t.jsxs("div",{children:[e,t.jsx(Se,{style:{margin:"8px 0"}}),t.jsxs("div",{className:"px-3 py-2 text-xs text-slate-400",children:["共 ",m.length," 个用户"]})]}),children:m.map(e=>t.jsx(De,{value:e.id,children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono text-sm",children:e.id}),e.is_first_recharge&&t.jsxs(_,{color:"gold",children:[t.jsx(k,{})," 首充"]})]}),t.jsxs("div",{className:"text-xs text-slate-400",children:["¥",e.currency," | ",e.total_recharge_count,"次"]})]})},e.id))}):t.jsx(c,{placeholder:"请输入用户ID",value:g,onChange:C,className:"xiuxian-input"})]})});return t.jsx(T,{title:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(K,{className:"text-purple-400"}),t.jsx("span",{className:"text-white",children:"用户充值"})]}),open:e,onCancel:r,onOk:()=>o.submit(),width:700,className:"xiuxian-modal",children:t.jsxs(n,{form:o,layout:"vertical",onFinish:l,children:[t.jsx(O,{}),y&&t.jsx(R,{className:"mb-4 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-blue-500/20",size:"small",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["用户ID: ",t.jsx("span",{className:"text-white font-mono",children:y.id})]}),t.jsxs("div",{children:["金币余额: ",t.jsx("span",{className:"text-yellow-400",children:y.currency.toLocaleString()})]}),t.jsxs("div",{children:["总充值: ",t.jsxs("span",{className:"text-green-400",children:["¥",y.total_recharge_amount]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["充值次数: ",t.jsx("span",{className:"text-blue-400",children:y.total_recharge_count})]}),t.jsxs("div",{children:["小月卡: ",t.jsxs("span",{className:"text-blue-400",children:[y.small_month_card_days,"天"]})]}),t.jsxs("div",{children:["大月卡: ",t.jsxs("span",{className:"text-purple-400",children:[y.big_month_card_days,"天"]})]})]})]})}),t.jsx(n.Item,{name:"type",label:t.jsx("span",{className:"text-slate-300",children:"充值类型"}),rules:[{required:!0,message:"请选择充值类型"}],children:t.jsxs(d,{onChange:e=>{x(e),f(""),v(null),o.setFieldsValue({tier:void 0})},className:"xiuxian-select",children:[t.jsx(De,{value:"recharge-currency",children:"金币充值"}),t.jsx(De,{value:"recharge-small-month-card",children:"小月卡"}),t.jsx(De,{value:"recharge-big-month-card",children:"大月卡"})]})}),"recharge-currency"===h&&t.jsx(n.Item,{name:"tier",label:t.jsx("span",{className:"text-slate-300",children:"充值档位"}),rules:[{required:!0,message:"请选择充值档位"}],children:t.jsx(d,{onChange:e=>{f(e),o.setFieldsValue({tier:e})},className:"xiuxian-select",placeholder:"请选择充值档位",children:null==(u=null==i?void 0:i.rechargeTiers)?void 0:u.map(e=>t.jsxs(De,{value:e.name,children:[e.name," (¥",e.amount,")"]},e.key))})}),j&&t.jsx(R,{className:"mb-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",size:"small",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"text-white font-semibold mb-2",children:j.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"text-slate-300",children:[t.jsxs("div",{children:["价格: ",t.jsxs("span",{className:"text-yellow-400",children:["¥",j.amount||j.price]})]}),j.currencyGained&&t.jsxs("div",{children:["获得金币: ",t.jsx("span",{className:"text-green-400",children:j.currencyGained})]}),j.days&&t.jsxs("div",{children:["月卡天数: ",t.jsxs("span",{className:"text-blue-400",children:[j.days,"天"]})]})]}),t.jsxs("div",{className:"text-slate-300",children:[j.firstRechargeBonus&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(te,{className:"text-pink-400"}),"首充奖励: ",t.jsxs("span",{className:"text-pink-400",children:[j.firstRechargeBonus,"金币"]})]}),(null==y?void 0:y.is_first_recharge)&&t.jsxs(_,{color:"gold",className:"mt-1",children:[t.jsx(k,{})," 首充用户"]})]})]})]})}),t.jsx(n.Item,{name:"remark",label:t.jsx("span",{className:"text-slate-300",children:"备注"}),children:t.jsx(c.TextArea,{rows:3,placeholder:"可选备注信息",className:"xiuxian-input"})})]})})}function Le(){const{loading:e,users:a,records:n,stats:r,config:l,selectedTab:o,rechargeModalVisible:i,selectedUser:c,rechargeForm:d,setSelectedTab:m,setRechargeModalVisible:u,setSelectedUser:h,fetchUsers:x,fetchRecords:g,fetchStats:b,fetchConfig:f,handleRechargeOk:j}=Ce();s.useEffect(()=>{x(),b()},[]);return t.jsxs(B,{children:[t.jsx(H,{icon:t.jsx(K,{}),title:"货币管理系统",subtitle:"管理用户金币、月卡和充值记录",actions:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"px-2 py-1 rounded-md bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",onClick:()=>{h(null),u(!0)},children:[t.jsx(P,{}),"充值"]}),t.jsx(D,{loading:e,onClick:()=>{x(),g(),b(),f()}})]})}),r&&t.jsx(ke,{stats:r}),t.jsx(_e,{selectedTab:o,onTabChange:m,onRecordsTabClick:()=>{m("records"),g()}}),t.jsxs(p,{title:("users"===o?"用户货币管理":"records"===o&&"充值记录管理")||"stats"===o&&"统计分析"||"货币管理",icon:t.jsx(K,{}),children:["users"===o&&t.jsx(ze,{users:a,loading:e,onRefresh:x,onStatsRefresh:b}),"records"===o&&t.jsx(Ee,{records:n,loading:e,config:l}),"stats"===o&&t.jsx(He,{stats:r})]}),t.jsx(Pe,{visible:i,user:c,config:l,users:a,onCancel:()=>{u(!1),h(null),d.resetFields()},onOk:j,form:d})]})}export{Le as default};
