import{j as e,u as t}from"./index-Ckj8NL4O.js";import{M as s}from"./index-D4iVXw9X.js";import{T as l}from"./index-CtV80BJG.js";import{R as a}from"./CloseOutlined-B5GEGV59.js";import{r}from"./react-vendor-DC8kK7ng.js";import{g as i,a as o}from"./associations-DL6mYn30.js";import{A as n,l as d}from"./config-mNRQLehO.js";import{s as c}from"./index-BV5fVDLQ.js";import"./index-DXDPliM2.js";import"./XiuxianUserSelector-DKIwCDDw.js";import{X as x}from"./XiuxianStatCard--p9u-aPO.js";import{X as m,a as b}from"./XiuxianPageTitle-B5HZmWPE.js";import{X as h}from"./XiuxianSearchBar-BlhuQRZj.js";import{X as p,T as j}from"./XiuxianTableContainer-DvIJ2RBs.js";import{X as u}from"./XiuxianRefreshButton-mo39ku_2.js";import{X as g}from"./XiuxianTableWithPagination-B3QSr0zs.js";import{R as f}from"./TeamOutlined-C3DpJA9v.js";import{R as N}from"./CrownOutlined-D_IXotyY.js";import{R as v}from"./BankOutlined-jZ5dj9mr.js";import{R as w}from"./FireOutlined-BzAmwE7f.js";import{R as y}from"./UserOutlined-Ds-ra3G6.js";import{R as k}from"./EyeOutlined-DhOFm2n6.js";import"./reactNode-pxslT-9z.js";import"./context-qSgXqFNs.js";import"./extendsObject-D96xg_Jc.js";import"./index-CUUyKPWT.js";import"./SearchOutlined-tx5BIyyr.js";import"./Table-DgAOF3px.js";import"./index-BbllsrZX.js";const S=({associationDetailVisible:t,setAssociationDetailVisible:r,selectedAssociation:i,getAssociationType:o,getLevelName:n})=>{var d,c,x,m,b,h,p,j;return e.jsx(s,{title:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xl font-bold text-white",children:"宗门详情"})}),open:t,onCancel:()=>r(!1),footer:null,closeIcon:e.jsx(a,{className:"text-white"}),width:800,className:"xiuxian-modal",children:i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"基础信息"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗门名称"}),e.jsx("p",{className:"font-medium text-white",children:i.宗门名称})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗门等级"}),e.jsx("p",{className:"font-medium text-white",children:i.宗门等级})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗主"}),e.jsx("p",{className:"font-medium text-white",children:i.宗主})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗门类型"}),e.jsx(l,{color:i.power>0?"purple":"blue",className:"border-0",style:{background:i.power>0?"linear-gradient(135deg, #8b5cf6, #ec4899)":"linear-gradient(135deg, #3b82f6, #06b6d4)",color:"white"},children:o(i.power)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"最低加入境界"}),e.jsx("p",{className:"font-medium text-white",children:n(i.最低加入境界)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl p-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"创立时间"}),e.jsx("p",{className:"font-medium text-white",children:(null==(d=i.创立时间)?void 0:d[0])||"未知"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"成员信息"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"总成员数"}),e.jsx("p",{className:"text-xl font-bold text-blue-400",children:(null==(c=i.所有成员)?void 0:c.length)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-xl border border-purple-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"副宗主数"}),e.jsx("p",{className:"text-xl font-bold text-purple-400",children:(null==(x=i.副宗主)?void 0:x.length)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"长老数"}),e.jsx("p",{className:"text-xl font-bold text-green-400",children:(null==(m=i.长老)?void 0:m.length)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 backdrop-blur-xl border border-yellow-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"内门弟子数"}),e.jsx("p",{className:"text-xl font-bold text-yellow-400",children:(null==(b=i.内门弟子)?void 0:b.length)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-pink-500/10 backdrop-blur-xl border border-red-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"外门弟子数"}),e.jsx("p",{className:"text-xl font-bold text-red-400",children:(null==(h=i.外门弟子)?void 0:h.length)||0})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"资源信息"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"灵石池"}),e.jsx("p",{className:"text-xl font-bold text-green-400",children:(null==(p=i.灵石池)?void 0:p.toLocaleString())||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-pink-500/10 backdrop-blur-xl border border-red-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"大阵血量"}),e.jsx("p",{className:"text-xl font-bold text-red-400",children:(null==(j=i.大阵血量)?void 0:j.toLocaleString())||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗门驻地"}),e.jsx("p",{className:"text-xl font-bold text-blue-400",children:i.宗门驻地||"无驻地"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-xl border border-purple-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"宗门神兽"}),e.jsx("p",{className:"text-xl font-bold text-purple-400",children:i.宗门神兽||"无"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 backdrop-blur-xl border border-yellow-500/30 p-4 rounded-xl shadow-lg",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"维护时间"}),e.jsx("p",{className:"text-xl font-bold text-yellow-400",children:i.维护时间?new Date(i.维护时间).toLocaleString():"-"})]})]})]})]})})};function A(){const{associations:s,loading:a,searchText:A,selectedAssociation:C,associationDetailVisible:L,pagination:T,stats:X,fetchAssociations:D,handleSearchAndFilter:O,handleTableChange:R,getAssociationType:V,getLevelName:$,setSearchText:z,setSelectedAssociation:M,setAssociationDetailVisible:P}=(()=>{const{user:e}=t(),[s,l]=r.useState([]),[a,x]=r.useState(!1),[m,b]=r.useState(""),[h,p]=r.useState(null),[j,u]=r.useState(!1),[g,f]=r.useState({current:1,pageSize:n,total:0,totalPages:0}),[N,v]=r.useState({total:0,totalMembers:0,totalPower:0,totalLingshi:0,xianjieCount:0,fanjieCount:0}),w=async(t=1,s=n)=>{if(e){x(!0);try{const e=localStorage.getItem("token");if(!e)return void c.error("未找到登录令牌");const a=await i(e,{page:t,pageSize:s,search:m});a.success&&a.data?(l(a.data.list),f(a.data.pagination)):c.error(a.message||"获取宗门数据失败")}catch(a){c.error("获取宗门数据失败")}finally{x(!1)}}},y=async()=>{if(e)try{const e=localStorage.getItem("token");if(!e)return void c.error("未找到登录令牌");const t=await o(e,{search:m});t.success&&t.data&&v(t.data)}catch(t){}};return r.useEffect(()=>{w(1,n),y()},[e]),{associations:s,loading:a,searchText:m,selectedAssociation:h,associationDetailVisible:j,pagination:g,stats:N,fetchAssociations:w,fetchStats:y,handleSearchAndFilter:()=>{w(1,g.pageSize),y()},handleTableChange:(e,t)=>{w(e,t)},getLevelName:e=>d[e]||`境界${e}`,getAssociationType:e=>e>0?"仙界":"凡界",setSearchText:b,setSelectedAssociation:p,setAssociationDetailVisible:u}})(),B=[{title:e.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:e.jsx("span",{children:"宗门信息"})}),key:"associationInfo",width:280,render:(t,s)=>{var l;return e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gradient-to-br from-slate-800/30 to-slate-900/30 backdrop-blur-xl border border-slate-700/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:(null==(l=s.宗门名称)?void 0:l.charAt(0))||"宗"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-semibold text-base mb-1",children:s.宗门名称}),e.jsxs("div",{className:"text-slate-300 text-sm mb-1",children:[e.jsx(N,{className:"mr-1 text-purple-400"}),"等级: ",e.jsx("span",{className:"text-purple-400 font-medium",children:s.宗门等级})]}),e.jsxs("div",{className:"text-slate-300 text-sm",children:[e.jsx(y,{className:"mr-1 text-blue-400"}),"宗主: ",e.jsx("span",{className:"text-blue-400 font-medium",children:s.宗主})]})]})]})}},{title:e.jsx("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:e.jsx("span",{children:"宗门类型"})}),key:"type",width:120,render:(t,s)=>e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{color:s.power>0?"purple":"blue",className:"px-3 py-1 rounded-full font-medium text-sm border-0 shadow-lg",style:{background:s.power>0?"linear-gradient(135deg, #8b5cf6, #ec4899)":"linear-gradient(135deg, #3b82f6, #06b6d4)",color:"white"},children:[e.jsx(N,{className:"mr-1"}),V(s.power)]})})},{title:e.jsx("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:e.jsx("span",{children:"成员统计"})}),key:"members",width:180,render:(t,s)=>{var l,a,r;return e.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/30 rounded-xl p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"总成员"}),e.jsx("span",{className:"text-white font-bold",children:((null==(l=s.所有成员)?void 0:l.length)||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"副宗主"}),e.jsx("span",{className:"text-purple-400 font-bold",children:((null==(a=s.副宗主)?void 0:a.length)||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"长老"}),e.jsx("span",{className:"text-green-400 font-bold",children:((null==(r=s.长老)?void 0:r.length)||0).toLocaleString()})]})]})})}},{title:e.jsx("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:e.jsx("span",{children:"资源信息"})}),key:"resources",width:160,render:(t,s)=>e.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/30 rounded-xl p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"灵石池"}),e.jsx("span",{className:"text-green-400 font-bold text-sm",children:(s.灵石池||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"大阵血量"}),e.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:(s.大阵血量||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"最低境界"}),e.jsx("span",{className:"text-purple-400 font-bold text-sm",children:$(s.最低加入境界)})]})]})})},{title:e.jsx("div",{className:"flex items-center gap-2 text-cyan-400 font-bold",children:e.jsx("span",{children:"宗门驻地"})}),key:"location",width:140,render:(t,s)=>e.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-xl border border-purple-500/30 rounded-xl p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-300 text-sm mb-1",children:"驻地"}),e.jsx("div",{className:"text-white font-bold text-sm",children:s.宗门驻地||"无驻地"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-300 text-sm mb-1",children:"神兽"}),e.jsx("div",{className:"text-pink-400 font-bold text-sm",children:s.宗门神兽||"无"})]})]})})},{title:e.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:e.jsx("span",{children:"操作"})}),key:"actions",width:120,render:(t,s)=>e.jsx("div",{className:"flex justify-center",children:e.jsx(j,{title:"查看详情",placement:"top",children:e.jsxs("button",{className:"px-3 py-1 text-sm bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-1",onClick:()=>{M(s),P(!0)},children:[e.jsx(k,{}),"查看"]})})})}];return e.jsxs(m,{children:[e.jsx(b,{icon:e.jsx(f,{}),title:"宗门管理",subtitle:"管理修仙世界的宗门信息",actions:e.jsx(u,{loading:a,onClick:()=>D(1,T.pageSize)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(x,{title:"总宗门数",value:(X.total||0).toLocaleString(),icon:e.jsx(f,{}),gradient:"blue",subtitle:`仙界: ${X.xianjieCount||0} | 凡界: ${X.fanjieCount||0}`}),e.jsx(x,{title:"仙界宗门",value:(X.xianjieCount||0).toLocaleString(),icon:e.jsx(N,{}),gradient:"purple",subtitle:`占比: ${X.total?Math.round(X.xianjieCount/X.total*100):0}%`}),e.jsx(x,{title:"总灵石池",value:(X.totalLingshi||0).toLocaleString(),icon:e.jsx(v,{}),gradient:"green",subtitle:`平均: ${X.total?Math.round(X.totalLingshi/X.total):0}`}),e.jsx(x,{title:"总成员数",value:(X.totalMembers||0).toLocaleString(),icon:e.jsx(w,{}),gradient:"orange",subtitle:`平均: ${X.total?Math.round(X.totalMembers/X.total):0}`})]}),e.jsx(h,{placeholder:"搜索宗门名称、宗主或驻地...",value:A,onChange:z,onSearch:O,onKeyPress:e=>"Enter"===e.key&&O(),className:"mb-6"}),e.jsx(p,{title:"宗门列表",icon:e.jsx(f,{}),children:e.jsx(g,{columns:B,dataSource:s,rowKey:"宗门名称",loading:a,pagination:{current:T.current,pageSize:T.pageSize,total:T.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t[0]}-${t[1]} 条，共 ${e} 条`},onPaginationChange:R,scroll:{x:1200},rowClassName:()=>"bg-slate-700 hover:bg-slate-600"})}),e.jsx(S,{associationDetailVisible:L,setAssociationDetailVisible:P,selectedAssociation:C,getAssociationType:V,getLevelName:$})]})}export{A as default};
