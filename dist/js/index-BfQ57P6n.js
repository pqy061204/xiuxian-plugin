import{r as e}from"./react-vendor-a03lyGlx.js";import{c as t}from"./index-Cy_K9d2s.js";import{u as o,m as n,k as r,n as a,d as i,g as s,K as l,t as c}from"./XiuxianUserSelector-BMQSkCjs.js";import{g as d,m as p,r as g,u,j as m,C as f,a as v,c as b}from"./reactNode-CNKl2Mmk.js";import{u as y,r as h,b as x,c as O,d as S,e as j,T as C}from"./XiuxianTableContainer-Ck0rxAnn.js";import{i as $}from"./extendsObject-C6YrUve6.js";const z=e.createContext({}),E=e=>{const{antCls:t,componentCls:o,iconCls:n,avatarBg:r,avatarColor:a,containerSize:i,containerSizeLG:s,containerSizeSM:l,textFontSize:c,textFontSizeLG:d,textFontSizeSM:p,iconFontSize:m,iconFontSizeLG:f,iconFontSizeSM:v,borderRadius:b,borderRadiusLG:y,borderRadiusSM:h,lineWidth:x,lineType:O}=e,S=(e,t,r,a)=>({width:e,height:e,borderRadius:"50%",fontSize:t,[`&${o}-square`]:{borderRadius:a},[`&${o}-icon`]:{fontSize:r,[`> ${n}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},g(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:a,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:r,border:`${u(x)} ${O} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),S(i,c,m,b)),{"&-lg":Object.assign({},S(s,d,f,y)),"&-sm":Object.assign({},S(l,p,v,h)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},w=e=>{const{componentCls:t,groupBorderColor:o,groupOverlapping:n,groupSpace:r}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:n}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:r}}}},N=d("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:o}=e,n=p(e,{avatarBg:o,avatarColor:t});return[E(n),w(n)]},e=>{const{controlHeight:t,controlHeightLG:o,controlHeightSM:n,fontSize:r,fontSizeLG:a,fontSizeXL:i,fontSizeHeading3:s,marginXS:l,marginXXS:c,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:o,containerSizeSM:n,textFontSize:r,textFontSizeLG:r,textFontSizeSM:r,iconFontSize:Math.round((a+i)/2),iconFontSizeLG:s,iconFontSizeSM:r,groupSpace:c,groupOverlapping:-l,groupBorderColor:d}});const P=e.forwardRef((a,i)=>{const{prefixCls:s,shape:l,size:c,src:d,srcSet:p,icon:g,className:u,rootClassName:v,style:b,alt:x,draggable:O,children:S,crossOrigin:j,gap:C=4,onError:$}=a,E=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(a,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[w,P]=e.useState(1),[k,B]=e.useState(!1),[M,W]=e.useState(!0),L=e.useRef(null),F=e.useRef(null),R=m(i,L),{getPrefixCls:I,avatar:G}=e.useContext(f),T=e.useContext(z),D=()=>{if(!F.current||!L.current)return;const e=F.current.offsetWidth,t=L.current.offsetWidth;0!==e&&0!==t&&2*C<t&&P(t-2*C<e?(t-2*C)/e:1)};e.useEffect(()=>{B(!0)},[]),e.useEffect(()=>{W(!0),P(1)},[d]),e.useEffect(D,[C]);const H=()=>{!1!==(null==$?void 0:$())&&W(!1)},X=o(e=>{var t,o;return null!==(o=null!==(t=null!=c?c:null==T?void 0:T.size)&&void 0!==t?t:e)&&void 0!==o?o:"default"}),A=Object.keys("object"==typeof X&&X||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),V=y(A),_=e.useMemo(()=>{if("object"!=typeof X)return{};const e=h.find(e=>V[e]),t=X[e];return t?{width:t,height:t,fontSize:t&&(g||S)?t/2:18}:{}},[V,X]),K=I("avatar",s),U=n(K),[q,Y,J]=N(K,U),Q=t({[`${K}-lg`]:"large"===X,[`${K}-sm`]:"small"===X}),Z=e.isValidElement(d),ee=l||(null==T?void 0:T.shape)||"circle",te=t(K,Q,null==G?void 0:G.className,`${K}-${ee}`,{[`${K}-image`]:Z||d&&M,[`${K}-icon`]:!!g},J,U,u,v,Y),oe="number"==typeof X?{width:X,height:X,fontSize:g?X/2:18}:{};let ne;if("string"==typeof d&&M)ne=e.createElement("img",{src:d,draggable:O,srcSet:p,onError:H,alt:x,crossOrigin:j});else if(Z)ne=d;else if(g)ne=g;else if(k||1!==w){const t=`scale(${w})`,o={msTransform:t,WebkitTransform:t,transform:t};ne=e.createElement(r,{onResize:D},e.createElement("span",{className:`${K}-string`,ref:F,style:Object.assign({},o)},S))}else ne=e.createElement("span",{className:`${K}-string`,style:{opacity:0},ref:F},S);return q(e.createElement("span",Object.assign({},E,{style:Object.assign(Object.assign(Object.assign(Object.assign({},oe),_),null==G?void 0:G.style),b),className:te,ref:R}),ne))}),k=e=>e?"function"==typeof e?e():e:null,B=e=>{const{componentCls:t,popoverColor:o,titleMinWidth:n,fontWeightStrong:r,innerPadding:a,boxShadowSecondary:i,colorTextHeading:s,borderRadiusLG:l,zIndexPopup:c,titleMarginBottom:d,colorBgElevated:p,popoverBg:u,titleBorderBottom:m,innerContentPadding:f,titlePadding:v}=e;return[{[t]:Object.assign(Object.assign({},g(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:c,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":p,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:u,backgroundClip:"padding-box",borderRadius:l,boxShadow:i,padding:a},[`${t}-title`]:{minWidth:n,marginBottom:d,color:s,fontWeight:r,borderBottom:m,padding:v},[`${t}-inner-content`]:{color:o,padding:f}})},x(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},M=e=>{const{componentCls:t}=e;return{[t]:a.map(o=>{const n=e[`${o}6`];return{[`&${t}-${o}`]:{"--antd-arrow-background-color":n,[`${t}-inner`]:{backgroundColor:n},[`${t}-arrow`]:{background:"transparent"}}}})}},W=d("Popover",e=>{const{colorBgElevated:t,colorText:o}=e,n=p(e,{popoverBg:t,popoverColor:o});return[B(n),M(n),$(n,"zoom-big")]},e=>{const{lineWidth:t,controlHeight:o,fontHeight:n,padding:r,wireframe:a,zIndexPopupBase:i,borderRadiusLG:s,marginXS:l,lineType:c,colorSplit:d,paddingSM:p}=e,g=o-n,u=g/2,m=g/2-t,f=r;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:i+30},O(e)),S({contentRadius:s,limitVerticalRadius:!0})),{innerPadding:a?0:12,titleMarginBottom:a?0:l,titlePadding:a?`${u}px ${f}px ${m}px`:0,titleBorderBottom:a?`${t}px ${c} ${d}`:"none",innerContentPadding:a?`${p}px ${f}px`:0})},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});const L=({title:t,content:o,prefixCls:n})=>t||o?e.createElement(e.Fragment,null,t&&e.createElement("div",{className:`${n}-title`},t),o&&e.createElement("div",{className:`${n}-inner-content`},o)):null,F=o=>{const{hashId:n,prefixCls:r,className:a,style:i,placement:s="top",title:l,content:c,children:d}=o,p=k(l),g=k(c),u=t(n,r,`${r}-pure`,`${r}-placement-${s}`,a);return e.createElement("div",{className:u,style:i},e.createElement("div",{className:`${r}-arrow`}),e.createElement(j,Object.assign({},o,{className:n,prefixCls:r}),d||e.createElement(L,{prefixCls:r,title:p,content:g})))};const R=e.forwardRef((o,n)=>{var r,a;const{prefixCls:c,title:d,content:p,overlayClassName:g,placement:u="top",trigger:m="hover",children:f,mouseEnterDelay:y=.1,mouseLeaveDelay:h=.1,onOpenChange:x,overlayStyle:O={},styles:S,classNames:j}=o,$=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(o,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:z,className:E,style:w,classNames:N,styles:P}=v("popover"),B=z("popover",c),[M,F,R]=W(B),I=z(),G=t(g,F,R,E,N.root,null==j?void 0:j.root),T=t(N.body,null==j?void 0:j.body),[D,H]=i(!1,{value:null!==(r=o.open)&&void 0!==r?r:o.visible,defaultValue:null!==(a=o.defaultOpen)&&void 0!==a?a:o.defaultVisible}),X=(e,t)=>{H(e,!0),null==x||x(e,t)},A=k(d),V=k(p);return M(e.createElement(C,Object.assign({placement:u,trigger:m,mouseEnterDelay:y,mouseLeaveDelay:h},$,{prefixCls:B,classNames:{root:G,body:T},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},P.root),w),O),null==S?void 0:S.root),body:Object.assign(Object.assign({},P.body),null==S?void 0:S.body)},ref:n,open:D,onOpenChange:e=>{X(e)},overlay:A||V?e.createElement(L,{prefixCls:B,title:A,content:V}):null,transitionName:s(I,"zoom-big",$.transitionName),"data-popover-inject":!0}),b(f,{onKeyDown:t=>{var o,n;e.isValidElement(f)&&(null===(n=null==f?void 0:(o=f.props).onKeyDown)||void 0===n||n.call(o,t)),(e=>{e.keyCode===l.ESC&&X(!1,e)})(t)}})))});R._InternalPanelDoNotUseOrYouWillBeFired=o=>{const{prefixCls:n,className:r}=o,a=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(o,["prefixCls","className"]),{getPrefixCls:i}=e.useContext(f),s=i("popover",n),[l,c,d]=W(s);return l(e.createElement(F,Object.assign({},a,{prefixCls:s,hashId:c,className:t(r,d)})))};const I=t=>{const{size:o,shape:n}=e.useContext(z),r=e.useMemo(()=>({size:t.size||o,shape:t.shape||n}),[t.size,t.shape,o,n]);return e.createElement(z.Provider,{value:r},t.children)},G=P;G.Group=o=>{var r,a,i,s;const{getPrefixCls:l,direction:d}=e.useContext(f),{prefixCls:p,className:g,rootClassName:u,style:m,maxCount:v,maxStyle:y,size:h,shape:x,maxPopoverPlacement:O,maxPopoverTrigger:S,children:j,max:C}=o,$=l("avatar",p),z=`${$}-group`,E=n($),[w,k,B]=N($,E),M=t(z,{[`${z}-rtl`]:"rtl"===d},B,E,g,u,k),W=c(j).map((e,t)=>b(e,{key:`avatar-key-${t}`})),L=(null==C?void 0:C.count)||v,F=W.length;if(L&&L<F){const o=W.slice(0,L),n=W.slice(L,F),l=(null==C?void 0:C.style)||y,c=(null===(r=null==C?void 0:C.popover)||void 0===r?void 0:r.trigger)||S||"hover",d=(null===(a=null==C?void 0:C.popover)||void 0===a?void 0:a.placement)||O||"top",p=Object.assign(Object.assign({content:n},null==C?void 0:C.popover),{classNames:{root:t(`${z}-popover`,null===(s=null===(i=null==C?void 0:C.popover)||void 0===i?void 0:i.classNames)||void 0===s?void 0:s.root)},placement:d,trigger:c});return o.push(e.createElement(R,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},p),e.createElement(P,{style:l},"+"+(F-L)))),w(e.createElement(I,{shape:x,size:h},e.createElement("div",{className:M,style:m},o)))}return w(e.createElement(I,{shape:x,size:h},e.createElement("div",{className:M,style:m},W)))};export{G as A};
